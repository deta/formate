import{S as $e,i as Ye,s as Ne,k as Pt,l as Tt,m as vt,h as Q,n as Z,L as xn,b as yt,B as ce,o as zn,M as On,N as Ln,O as sn,P as an,Q as on,J as ht,w as jt,x as Dt,y as Vt,f as st,t as gt,z as Bt,K as De,R as Fn,a as Rt,c as Ut,T as Wn,q as fe,r as he,U as br,d as Ve,V as _r,W as Pe,X as un,g as Be,Y as wr,Z as Xe,_ as Pr,u as Tr,$ as Er}from"../../chunks/index-1a8d1abb.js";import{L as jn,I as Ar,B as Zn,f as Te,s as Dn}from"../../chunks/Label-59fdd747.js";import{M as Cr,H as Mr,C as Rr,n as Ur,c as Sr,P as kr,i as Ir,h as xr,g as Or,o as Lr,T as Fr,a as Wr,D as jr}from"../../chunks/editor-644a48cf.js";var Dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={exports:{}};(function(O,c){(function(m,b){O.exports=b()})(Dr,function(){return(()=>{var d=[,(w,C,_)=>{_.r(C),_.d(C,{default:()=>P});var k=(()=>{var V=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(U){U=U||{};var u;u||(u=typeof U<"u"?U:{});var z,dt;u.ready=new Promise(function(e,t){z=e,dt=t});function tt(){function e(h){const f=i;r=t=0,i=new Map,f.forEach(v=>{try{v(h)}catch(p){console.error(p)}}),this.La(),s&&s.fb()}let t=0,r=0,i=new Map,s=null,l=null;this.requestAnimationFrame=function(h){t||(t=requestAnimationFrame(e.bind(this)));const f=++r;return i.set(f,h),f},this.cancelAnimationFrame=function(h){i.delete(h),t&&i.size==0&&(cancelAnimationFrame(t),t=0)},this.cb=function(h){l&&(document.body.remove(l),l=null),h||(l=document.createElement("div"),l.style.backgroundColor="black",l.style.position="fixed",l.style.right=0,l.style.top=0,l.style.color="white",l.style.padding="4px",l.innerHTML="RIVE FPS",h=function(f){l.innerHTML="RIVE FPS "+f.toFixed(1)},document.body.appendChild(l)),s=new function(){let f=0,v=0;this.fb=function(){var p=performance.now();v?(++f,p-=v,1e3<p&&(h(1e3*f/p),f=v=0)):(v=p,f=0)}}},this.$a=function(){l&&(document.body.remove(l),l=null),s=null},this.La=function(){}}function W(e){console.assert(!0);const t=new Map;let r=-1/0;this.push=function(i){return i=i+((1<<e)-1)>>e,t.has(i)&&clearTimeout(t.get(i)),t.set(i,setTimeout(function(){t.delete(i),t.length==0?r=-1/0:i==r&&(r=Math.max(...t.keys()),console.assert(r<i))},1e3)),r=Math.max(i,r),r<<e}}const at=new function(){function e(){if(!t){let rt=function(ct,$,K){if($=A.createShader($),A.shaderSource($,K),A.compileShader($),K=A.getShaderInfoLog($),0<K.length)throw K;A.attachShader(ct,$)};var L=document.createElement("canvas"),B={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let A=L.getContext("webgl2",B);if(A)r=2;else if(A=L.getContext("webgl",B))r=1;else return console.log("No WebGL support. Image mesh will not be drawn."),!1;if(i=Math.min(A.getParameter(A.MAX_RENDERBUFFER_SIZE),A.getParameter(A.MAX_TEXTURE_SIZE)),L=A.createProgram(),rt(L,A.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),rt(L,A.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),A.bindAttribLocation(L,0,"vertex"),A.bindAttribLocation(L,1,"uv"),A.linkProgram(L),B=A.getProgramInfoLog(L),0<B.length)throw B;s=A.getUniformLocation(L,"mat"),l=A.getUniformLocation(L,"translate"),A.useProgram(L),A.bindBuffer(A.ARRAY_BUFFER,A.createBuffer()),A.enableVertexAttribArray(0),A.enableVertexAttribArray(1),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,A.createBuffer()),A.uniform1i(A.getUniformLocation(L,"image"),0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=A}return!0}let t=null,r=0,i=0,s=null,l=null,h=0,f=0;this.ob=function(){return e(),i},this.Ya=function(L){if(!e())return null;const B=t.createTexture();return t.bindTexture(t.TEXTURE_2D,B),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,L),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),r==2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),B};const v=new W(8),p=new W(8),T=new W(10),I=new W(10);this.bb=function(L,B,A,rt,ct){if(e()){var $=v.push(L),K=p.push(B);(t.canvas.width!=$||t.canvas.height!=K)&&(t.canvas.width=$,t.canvas.height=K),t.viewport(0,K-B,L,B),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),A.sort((q,te)=>te.Oa-q.Oa),$=T.push(rt),h!=$&&(t.bufferData(t.ARRAY_BUFFER,8*$,t.DYNAMIC_DRAW),h=$),$=0;for(var ft of A)t.bufferSubData(t.ARRAY_BUFFER,$,ft.Aa),$+=4*ft.Aa.length;console.assert($==4*rt);for(var Mt of A)t.bufferSubData(t.ARRAY_BUFFER,$,Mt.Ra),$+=4*Mt.Ra.length;console.assert($==8*rt),$=I.push(ct),f!=$&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*$,t.DYNAMIC_DRAW),f=$),ft=0;for(var qt of A)t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,ft,qt.indices),ft+=2*qt.indices.length;console.assert(ft==2*ct),qt=0,Mt=!0,$=ft=0;for(const q of A){q.image.va!=qt&&(t.bindTexture(t.TEXTURE_2D,q.image.Va||null),qt=q.image.va),q.rb?(t.scissor(q.Ea,K-q.Fa-q.Ka,q.yb,q.Ka),Mt=!0):Mt&&(t.scissor(0,K-B,L,B),Mt=!1),A=2/L;const te=-2/B;t.uniform4f(s,q.la[0]*A*q.ra,q.la[1]*te*q.sa,q.la[2]*A*q.ra,q.la[3]*te*q.sa),t.uniform2f(l,q.la[4]*A*q.ra+A*(q.Ea-q.pb*q.ra)-1,q.la[5]*te*q.sa+te*(q.Fa-q.qb*q.sa)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,$),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,$+4*rt),t.drawElements(t.TRIANGLES,q.indices.length,t.UNSIGNED_SHORT,ft),$+=4*q.Aa.length,ft+=2*q.indices.length}console.assert($==4*rt),console.assert(ft==2*ct)}},this.canvas=function(){return e()&&t.canvas}};U.onRuntimeInitialized=function(){function e(y){switch(y){case p.srcOver:return"source-over";case p.screen:return"screen";case p.overlay:return"overlay";case p.darken:return"darken";case p.lighten:return"lighten";case p.colorDodge:return"color-dodge";case p.colorBurn:return"color-burn";case p.hardLight:return"hard-light";case p.softLight:return"soft-light";case p.difference:return"difference";case p.exclusion:return"exclusion";case p.multiply:return"multiply";case p.hue:return"hue";case p.saturation:return"saturation";case p.color:return"color";case p.luminosity:return"luminosity"}}function t(y){return"rgba("+((16711680&y)>>>16)+","+((65280&y)>>>8)+","+((255&y)>>>0)+","+((4278190080&y)>>>24)/255+")"}function r(){0<ft.length&&(at.bb(K.drawWidth(),K.drawHeight(),ft,Mt,qt),ft=[],qt=Mt=0,K.reset(512,512));for(const y of $){for(const x of y.da)x();y.da=[]}$.clear()}var i=U.RenderPaintStyle;const s=U.RenderPath,l=U.RenderPaint,h=U.Renderer,f=U.StrokeCap,v=U.StrokeJoin,p=U.BlendMode,T=i.fill,I=i.stroke,L=U.FillRule.evenOdd;let B=1;var A=U.RenderImage.extend("CanvasRenderImage",{__construct:function(){this.__parent.__construct.call(this),this.va=B,B=B+1&2147483647||1},decode:function(y){let x=rn;x.total++;var H=this,it=new Image;it.src=URL.createObjectURL(new Blob([y],{type:"image/png"})),it.onload=function(){if(H.Ta=it,H.Va=at.Ya(it),H.size(it.width,it.height),x.loaded++,x.loaded===x.total){const J=x.ready;J&&(J(),x.ready=null)}}}}),rt=s.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.ga=new Path2D},reset:function(){this.ga=new Path2D},addPath:function(y,x){var H=this.ga,it=H.addPath;y=y.ga;const J=new DOMMatrix;J.a=x.xx,J.b=x.xy,J.c=x.yx,J.d=x.yy,J.e=x.tx,J.f=x.ty,it.call(H,y,J)},fillRule:function(y){this.Ca=y},moveTo:function(y,x){this.ga.moveTo(y,x)},lineTo:function(y,x){this.ga.lineTo(y,x)},cubicTo:function(y,x,H,it,J,_t){this.ga.bezierCurveTo(y,x,H,it,J,_t)},close:function(){this.ga.closePath()}}),ct=l.extend("CanvasRenderPaint",{color:function(y){this.Da=t(y)},thickness:function(y){this.Wa=y},join:function(y){switch(y){case v.miter:this.ua="miter";break;case v.round:this.ua="round";break;case v.bevel:this.ua="bevel"}},cap:function(y){switch(y){case f.butt:this.ta="butt";break;case f.round:this.ta="round";break;case f.square:this.ta="square"}},style:function(y){this.Ua=y},blendMode:function(y){this.Sa=e(y)},linearGradient:function(y,x,H,it){this.oa={Pa:y,Qa:x,Ha:H,Ia:it,za:[]}},radialGradient:function(y,x,H,it){this.oa={Pa:y,Qa:x,Ha:H,Ia:it,za:[],mb:!0}},addStop:function(y,x){this.oa.za.push({color:y,stop:x})},completeGradient:function(){},draw:function(y,x,H){let it=this.Ua;var J=this.Da,_t=this.oa;if(y.globalCompositeOperation=this.Sa,_t!=null){J=_t.Pa;var Et=_t.Qa;const $t=_t.Ha;var Ft=_t.Ia;const Wt=_t.za;_t.mb?(_t=$t-J,Ft-=Et,J=y.createRadialGradient(J,Et,0,J,Et,Math.sqrt(_t*_t+Ft*Ft))):J=y.createLinearGradient(J,Et,$t,Ft);for(let Yt=0,mt=Wt.length;Yt<mt;Yt++)Et=Wt[Yt],J.addColorStop(Et.stop,t(Et.color));this.Da=J,this.oa=null}switch(it){case I:y.strokeStyle=J,y.lineWidth=this.Wa,y.lineCap=this.ta,y.lineJoin=this.ua,y.stroke(x);break;case T:y.fillStyle=J,y.fill(x,H)}}});const $=new Set;let K=null,ft=[],Mt=0,qt=0;var q=U.CanvasRenderer=h.extend("Renderer",{__construct:function(y){this.__parent.__construct.call(this),this.fa=[1,0,0,1,0,0],this.Z=y.getContext("2d"),this.Ba=y,this.da=[]},save:function(){this.fa.push(...this.fa.slice(this.fa.length-6)),this.da.push(this.Z.save.bind(this.Z))},restore:function(){const y=this.fa.length-6;if(6>y)throw"restore() called without matching save().";this.fa.splice(y),this.da.push(this.Z.restore.bind(this.Z))},transform:function(y){const x=this.fa,H=x.length-6;x.splice(H,6,x[H]*y.xx+x[H+2]*y.xy,x[H+1]*y.xx+x[H+3]*y.xy,x[H]*y.yx+x[H+2]*y.yy,x[H+1]*y.yx+x[H+3]*y.yy,x[H]*y.tx+x[H+2]*y.ty+x[H+4],x[H+1]*y.tx+x[H+3]*y.ty+x[H+5]),this.da.push(this.Z.transform.bind(this.Z,y.xx,y.xy,y.yx,y.yy,y.tx,y.ty))},rotate:function(y){const x=Math.sin(y);y=Math.cos(y),this.transform({xx:y,xy:x,yx:-x,yy:y,tx:0,ty:0})},_drawPath:function(y,x){this.da.push(x.draw.bind(x,this.Z,y.ga,y.Ca===L?"evenodd":"nonzero"))},_drawImage:function(y,x,H){var it=y.Ta;if(it){var J=this.Z,_t=e(x);this.da.push(function(){J.globalCompositeOperation=_t,J.globalAlpha=H,J.drawImage(it,0,0),J.globalAlpha=1})}},_getMatrix:function(y){const x=this.fa,H=x.length-6;for(let it=0;6>it;++it)y[it]=x[H+it]},_drawImageMesh:function(y,x,H,it,J,_t,Et,Ft,$t,Wt){var Yt=this.Z.canvas.width,mt=this.Z.canvas.height;const Un=$t-Et,Sn=Wt-Ft;Et=Math.max(Et,0),Ft=Math.max(Ft,0),$t=Math.min($t,Yt),Wt=Math.min(Wt,mt);const _e=$t-Et,we=Wt-Ft;if(console.assert(_e<=Math.min(Un,Yt)),console.assert(we<=Math.min(Sn,mt)),!(0>=_e||0>=we)){$t=_e<Un||we<Sn,Yt=Wt=1;var re=Math.ceil(_e*Wt),ie=Math.ceil(we*Yt);mt=at.ob(),re>mt&&(Wt*=mt/re,re=mt),ie>mt&&(Yt*=mt/ie,ie=mt),K||(K=new u.DynamicRectanizer(mt),K.reset(512,512)),mt=K.addRect(re,ie),0>mt&&(r(),$.add(this),mt=K.addRect(re,ie),console.assert(0<=mt));var kn=mt&65535,In=mt>>16;ft.push({la:this.fa.slice(this.fa.length-6),image:y,Ea:kn,Fa:In,pb:Et,qb:Ft,yb:re,Ka:ie,ra:Wt,sa:Yt,Aa:new Float32Array(it),Ra:new Float32Array(J),indices:new Uint16Array(_t),rb:$t,Oa:y.va<<1|($t?1:0)}),Mt+=it.length,qt+=_t.length;var le=this.Z,yr=e(x);this.da.push(function(){le.save(),le.resetTransform(),le.globalCompositeOperation=yr,le.globalAlpha=H,le.drawImage(at.canvas(),kn,In,re,ie,Et,Ft,_e,we),le.restore()})}},_clipPath:function(y){this.da.push(this.Z.clip.bind(this.Z,y.ga,y.Ca===L?"evenodd":"nonzero"))},clear:function(){$.add(this),this.da.push(this.Z.clearRect.bind(this.Z,0,0,this.Ba.width,this.Ba.height))},flush:function(){},translate:function(y,x){this.transform({xx:1,xy:0,yx:0,yy:1,tx:y,ty:x})}});U.makeRenderer=function(y){return new q(y)},U.renderFactory={makeRenderPaint:function(){return new ct},makeRenderPath:function(){return new rt},makeRenderImage:function(){return new A}};let te=U.load,rn=null;U.load=function(y){return new Promise(function(x){let H=null;rn={total:0,loaded:0,ready:function(){x(H)}},H=te(y),rn.total==0&&x(H)})},i=new tt,U.requestAnimationFrame=i.requestAnimationFrame.bind(i),U.cancelAnimationFrame=i.cancelAnimationFrame.bind(i),U.enableFPSCounter=i.cb.bind(i),U.disableFPSCounter=i.$a,i.La=r,U.cleanup=function(){K&&K.delete()}};var D=Object.assign({},u),F=typeof window=="object",G=typeof importScripts=="function",et="",pt,St;(F||G)&&(G?et=self.location.href:typeof document<"u"&&document.currentScript&&(et=document.currentScript.src),V&&(et=V),et.indexOf("blob:")!==0?et=et.substr(0,et.replace(/[?#].*/,"").lastIndexOf("/")+1):et="",G&&(St=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),pt=(e,t,r)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?t(i.response):r()},i.onerror=r,i.send(null)});var Nt=u.print||console.log.bind(console),ot=u.printErr||console.warn.bind(console);Object.assign(u,D),D=null;var xt;u.wasmBinary&&(xt=u.wasmBinary),u.noExitRuntime,typeof WebAssembly!="object"&&pe("no native wasm support detected");var o,n=!1,a=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function g(e,t,r){var i=t+r;for(r=t;e[r]&&!(r>=i);)++r;if(16<r-t&&e.buffer&&a)return a.decode(e.subarray(t,r));for(i="";t<r;){var s=e[t++];if(s&128){var l=e[t++]&63;if((s&224)==192)i+=String.fromCharCode((s&31)<<6|l);else{var h=e[t++]&63;s=(s&240)==224?(s&15)<<12|l<<6|h:(s&7)<<18|l<<12|h<<6|e[t++]&63,65536>s?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else i+=String.fromCharCode(s)}return i}var E,M,R,X,nt,j,Y,bt,kt;function lt(){var e=o.buffer;E=e,u.HEAP8=M=new Int8Array(e),u.HEAP16=X=new Int16Array(e),u.HEAP32=j=new Int32Array(e),u.HEAPU8=R=new Uint8Array(e),u.HEAPU16=nt=new Uint16Array(e),u.HEAPU32=Y=new Uint32Array(e),u.HEAPF32=bt=new Float32Array(e),u.HEAPF64=kt=new Float64Array(e)}var Ot,At=[],ae=[],ln=[];function Gn(){var e=u.preRun.shift();At.unshift(e)}var ee=0,de=null;function pe(e){throw u.onAbort&&u.onAbort(e),e="Aborted("+e+")",ot(e),n=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),dt(e),e}function cn(){return It.startsWith("data:application/octet-stream;base64,")}var It;if(It="canvas_advanced.wasm",!cn()){var fn=It;It=u.locateFile?u.locateFile(fn,et):et+fn}function hn(){var e=It;try{if(e==It&&xt)return new Uint8Array(xt);if(St)return St(e);throw"both async and sync fetching of the wasm failed"}catch(t){pe(t)}}function qn(){if(!xt&&(F||G)){if(typeof fetch=="function"&&!It.startsWith("file://"))return fetch(It,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+It+"'";return e.arrayBuffer()}).catch(function(){return hn()});if(pt)return new Promise(function(e,t){pt(It,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return hn()})}function He(e){for(;0<e.length;)e.shift()(u)}function dn(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?"_"+e:e}function Ee(e,t){return e=dn(e),function(){return t.apply(this,arguments)}}var Lt=[{},{value:void 0},{value:null},{value:!0},{value:!1}],ze=[];function Ae(e){var t=Error,r=Ee(e,function(i){this.name=e,this.message=i,i=Error(i).stack,i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},r}var oe=void 0;function N(e){throw new oe(e)}var Kt=e=>(e||N("Cannot use deleted val. handle = "+e),Lt[e].value),Ht=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=ze.length?ze.pop():Lt.length;return Lt[t]={ya:1,value:e},t}},pn=void 0,mn=void 0;function ut(e){for(var t="";R[e];)t+=mn[R[e++]];return t}var me=[];function Ze(){for(;me.length;){var e=me.pop();e.U.ka=!1,e.delete()}}var ve=void 0,zt={};function Qe(e,t){for(t===void 0&&N("ptr should not be undefined");e.$;)t=e.na(t),e=e.$;return t}var ne={};function vn(e){e=Mn(e);var t=ut(e);return Gt(e),t}function ge(e,t){var r=ne[e];return r===void 0&&N(t+" has unknown type "+vn(e)),r}function Ce(){}var Ge=!1;function gn(e){--e.count.value,e.count.value===0&&(e.aa?e.ca.ha(e.aa):e.X.V.ha(e.W))}function yn(e,t,r){return t===r?e:r.$===void 0?null:(e=yn(e,t,r.$),e===null?null:r.ab(e))}var bn={};function Kn(e,t){return t=Qe(e,t),zt[t]}var _n=void 0;function Me(e){throw new _n(e)}function Re(e,t){return t.X&&t.W||Me("makeClassHandle requires ptr and ptrType"),!!t.ca!=!!t.aa&&Me("Both smartPtrType and smartPtr must be specified"),t.count={value:1},se(Object.create(e,{U:{value:t}}))}function se(e){return typeof FinalizationRegistry>"u"?(se=t=>t,e):(Ge=new FinalizationRegistry(t=>{gn(t.U)}),se=t=>{var r=t.U;return r.aa&&Ge.register(t,{U:r},t),t},Ce=t=>{Ge.unregister(t)},se(e))}var Ue={};function ye(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function be(e){return this.fromWireType(j[e>>2])}var ue={},Se={};function Ct(e,t,r){function i(f){f=r(f),f.length!==e.length&&Me("Mismatched type converter count");for(var v=0;v<e.length;++v)Xt(e[v],f[v])}e.forEach(function(f){Se[f]=t});var s=Array(t.length),l=[],h=0;t.forEach((f,v)=>{ne.hasOwnProperty(f)?s[v]=ne[f]:(l.push(f),ue.hasOwnProperty(f)||(ue[f]=[]),ue[f].push(()=>{s[v]=ne[f],++h,h===l.length&&i(s)}))}),l.length===0&&i(s)}function ke(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Xt(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||N('type "'+i+'" must have a positive integer typeid pointer'),ne.hasOwnProperty(e)){if(r.lb)return;N("Cannot register type '"+i+"' twice")}ne[e]=t,delete Se[e],ue.hasOwnProperty(e)&&(t=ue[e],delete ue[e],t.forEach(s=>s()))}function qe(e){N(e.U.X.V.name+" instance already deleted")}function Jt(){}function Ke(e,t,r){if(e[t].Y===void 0){var i=e[t];e[t]=function(){return e[t].Y.hasOwnProperty(arguments.length)||N("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].Y+")!"),e[t].Y[arguments.length].apply(this,arguments)},e[t].Y=[],e[t].Y[i.ja]=i}}function Je(e,t,r){u.hasOwnProperty(e)?((r===void 0||u[e].Y!==void 0&&u[e].Y[r]!==void 0)&&N("Cannot register public name '"+e+"' twice"),Ke(u,e,e),u.hasOwnProperty(r)&&N("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),u[e].Y[r]=t):(u[e]=t,r!==void 0&&(u[e].zb=r))}function Jn(e,t,r,i,s,l,h,f){this.name=e,this.constructor=t,this.ea=r,this.ha=i,this.$=s,this.gb=l,this.na=h,this.ab=f,this.Ma=[]}function Ie(e,t,r){for(;t!==r;)t.na||N("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.na(e),t=t.$;return e}function tr(e,t){return t===null?(this.wa&&N("null is not a valid "+this.name),0):(t.U||N('Cannot pass "'+en(t)+'" as a '+this.name),t.U.W||N("Cannot pass deleted object as a pointer of type "+this.name),Ie(t.U.W,t.U.X.V,this.V))}function er(e,t){if(t===null){if(this.wa&&N("null is not a valid "+this.name),this.qa){var r=this.xa();return e!==null&&e.push(this.ha,r),r}return 0}if(t.U||N('Cannot pass "'+en(t)+'" as a '+this.name),t.U.W||N("Cannot pass deleted object as a pointer of type "+this.name),!this.pa&&t.U.X.pa&&N("Cannot convert argument of type "+(t.U.ca?t.U.ca.name:t.U.X.name)+" to parameter type "+this.name),r=Ie(t.U.W,t.U.X.V,this.V),this.qa)switch(t.U.aa===void 0&&N("Passing raw pointer to smart pointer is illegal"),this.xb){case 0:t.U.ca===this?r=t.U.aa:N("Cannot convert argument of type "+(t.U.ca?t.U.ca.name:t.U.X.name)+" to parameter type "+this.name);break;case 1:r=t.U.aa;break;case 2:if(t.U.ca===this)r=t.U.aa;else{var i=t.clone();r=this.tb(r,Ht(function(){i.delete()})),e!==null&&e.push(this.ha,r)}break;default:N("Unsupporting sharing policy")}return r}function nr(e,t){return t===null?(this.wa&&N("null is not a valid "+this.name),0):(t.U||N('Cannot pass "'+en(t)+'" as a '+this.name),t.U.W||N("Cannot pass deleted object as a pointer of type "+this.name),t.U.X.pa&&N("Cannot convert argument of type "+t.U.X.name+" to parameter type "+this.name),Ie(t.U.W,t.U.X.V,this.V))}function Zt(e,t,r,i){this.name=e,this.V=t,this.wa=r,this.pa=i,this.qa=!1,this.ha=this.tb=this.xa=this.Na=this.xb=this.sb=void 0,t.$!==void 0?this.toWireType=er:(this.toWireType=i?tr:nr,this.ba=null)}function wn(e,t,r){u.hasOwnProperty(e)||Me("Replacing nonexistant public symbol"),u[e].Y!==void 0&&r!==void 0?u[e].Y[r]=t:(u[e]=t,u[e].ja=r)}function rr(e,t){var r=[];return function(){if(r.length=0,Object.assign(r,arguments),e.includes("j")){var i=u["dynCall_"+e];i=r&&r.length?i.apply(null,[t].concat(r)):i.call(null,t)}else i=Ot.get(t).apply(null,r);return i}}function wt(e,t){e=ut(e);var r=e.includes("j")?rr(e,t):Ot.get(t);return typeof r!="function"&&N("unknown function pointer with signature "+e+": "+t),r}var Pn=void 0;function Qt(e,t){function r(l){s[l]||ne[l]||(Se[l]?Se[l].forEach(r):(i.push(l),s[l]=!0))}var i=[],s={};throw t.forEach(r),new Pn(e+": "+i.map(vn).join([", "]))}function xe(e,t,r,i,s){var l=t.length;2>l&&N("argTypes array size mismatch! Must at least get return value and 'this' types!");var h=t[1]!==null&&r!==null,f=!1;for(r=1;r<t.length;++r)if(t[r]!==null&&t[r].ba===void 0){f=!0;break}var v=t[0].name!=="void",p=l-2,T=Array(p),I=[],L=[];return function(){if(arguments.length!==p&&N("function "+e+" called with "+arguments.length+" arguments, expected "+p+" args!"),L.length=0,I.length=h?2:1,I[0]=s,h){var B=t[1].toWireType(L,this);I[1]=B}for(var A=0;A<p;++A)T[A]=t[A+2].toWireType(L,arguments[A]),I.push(T[A]);if(A=i.apply(null,I),f)ye(L);else for(var rt=h?1:2;rt<t.length;rt++){var ct=rt===1?B:T[rt-2];t[rt].ba!==null&&t[rt].ba(ct)}return B=v?t[0].fromWireType(A):void 0,B}}function Oe(e,t){for(var r=[],i=0;i<e;i++)r.push(Y[t+4*i>>2]);return r}function Tn(e,t,r){return e instanceof Object||N(r+' with invalid "this": '+e),e instanceof t.V.constructor||N(r+' incompatible with "this" of type '+e.constructor.name),e.U.W||N("cannot call emscripten binding method "+r+" on deleted object"),Ie(e.U.W,e.U.X.V,t.V)}function tn(e){4<e&&--Lt[e].ya===0&&(Lt[e]=void 0,ze.push(e))}function ir(e,t,r){switch(t){case 0:return function(i){return this.fromWireType((r?M:R)[i])};case 1:return function(i){return this.fromWireType((r?X:nt)[i>>1])};case 2:return function(i){return this.fromWireType((r?j:Y)[i>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function en(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function ar(e,t){switch(t){case 2:return function(r){return this.fromWireType(bt[r>>2])};case 3:return function(r){return this.fromWireType(kt[r>>3])};default:throw new TypeError("Unknown float type: "+e)}}function or(e,t,r){switch(t){case 0:return r?function(i){return M[i]}:function(i){return R[i]};case 1:return r?function(i){return X[i>>1]}:function(i){return nt[i>>1]};case 2:return r?function(i){return j[i>>2]}:function(i){return Y[i>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var En=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function sr(e,t){for(var r=e>>1,i=r+t/2;!(r>=i)&&nt[r];)++r;if(r<<=1,32<r-e&&En)return En.decode(R.subarray(e,r));for(r="",i=0;!(i>=t/2);++i){var s=X[e+2*i>>1];if(s==0)break;r+=String.fromCharCode(s)}return r}function ur(e,t,r){if(r===void 0&&(r=2147483647),2>r)return 0;r-=2;var i=t;r=r<2*e.length?r/2:e.length;for(var s=0;s<r;++s)X[t>>1]=e.charCodeAt(s),t+=2;return X[t>>1]=0,t-i}function lr(e){return 2*e.length}function cr(e,t){for(var r=0,i="";!(r>=t/4);){var s=j[e+4*r>>2];if(s==0)break;++r,65536<=s?(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|s&1023)):i+=String.fromCharCode(s)}return i}function fr(e,t,r){if(r===void 0&&(r=2147483647),4>r)return 0;var i=t;r=i+r-4;for(var s=0;s<e.length;++s){var l=e.charCodeAt(s);if(55296<=l&&57343>=l){var h=e.charCodeAt(++s);l=65536+((l&1023)<<10)|h&1023}if(j[t>>2]=l,t+=4,t+4>r)break}return j[t>>2]=0,t-i}function hr(e){for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);55296<=i&&57343>=i&&++r,t+=4}return t}var dr={};function Le(e){var t=dr[e];return t===void 0?ut(e):t}var Fe=[];function pr(e){var t=Fe.length;return Fe.push(e),t}function mr(e,t){for(var r=Array(e),i=0;i<e;++i)r[i]=ge(Y[t+4*i>>2],"parameter "+i);return r}var An=[],vr=[null,[],[]];oe=u.BindingError=Ae("BindingError"),u.count_emval_handles=function(){for(var e=0,t=5;t<Lt.length;++t)Lt[t]!==void 0&&++e;return e},u.get_first_emval=function(){for(var e=5;e<Lt.length;++e)if(Lt[e]!==void 0)return Lt[e];return null},pn=u.PureVirtualError=Ae("PureVirtualError");for(var Cn=Array(256),We=0;256>We;++We)Cn[We]=String.fromCharCode(We);mn=Cn,u.getInheritedInstanceCount=function(){return Object.keys(zt).length},u.getLiveInheritedInstances=function(){var e=[],t;for(t in zt)zt.hasOwnProperty(t)&&e.push(zt[t]);return e},u.flushPendingDeletes=Ze,u.setDelayFunction=function(e){ve=e,me.length&&ve&&ve(Ze)},_n=u.InternalError=Ae("InternalError"),Jt.prototype.isAliasOf=function(e){if(!(this instanceof Jt&&e instanceof Jt))return!1;var t=this.U.X.V,r=this.U.W,i=e.U.X.V;for(e=e.U.W;t.$;)r=t.na(r),t=t.$;for(;i.$;)e=i.na(e),i=i.$;return t===i&&r===e},Jt.prototype.clone=function(){if(this.U.W||qe(this),this.U.ma)return this.U.count.value+=1,this;var e=se,t=Object,r=t.create,i=Object.getPrototypeOf(this),s=this.U;return e=e(r.call(t,i,{U:{value:{count:s.count,ka:s.ka,ma:s.ma,W:s.W,X:s.X,aa:s.aa,ca:s.ca}}})),e.U.count.value+=1,e.U.ka=!1,e},Jt.prototype.delete=function(){this.U.W||qe(this),this.U.ka&&!this.U.ma&&N("Object already scheduled for deletion"),Ce(this),gn(this.U),this.U.ma||(this.U.aa=void 0,this.U.W=void 0)},Jt.prototype.isDeleted=function(){return!this.U.W},Jt.prototype.deleteLater=function(){return this.U.W||qe(this),this.U.ka&&!this.U.ma&&N("Object already scheduled for deletion"),me.push(this),me.length===1&&ve&&ve(Ze),this.U.ka=!0,this},Zt.prototype.hb=function(e){return this.Na&&(e=this.Na(e)),e},Zt.prototype.Ga=function(e){this.ha&&this.ha(e)},Zt.prototype.argPackAdvance=8,Zt.prototype.readValueFromPointer=be,Zt.prototype.deleteObject=function(e){e!==null&&e.delete()},Zt.prototype.fromWireType=function(e){function t(){return this.qa?Re(this.V.ea,{X:this.sb,W:r,ca:this,aa:e}):Re(this.V.ea,{X:this,W:e})}var r=this.hb(e);if(!r)return this.Ga(e),null;var i=Kn(this.V,r);if(i!==void 0)return i.U.count.value===0?(i.U.W=r,i.U.aa=e,i.clone()):(i=i.clone(),this.Ga(e),i);if(i=this.V.gb(r),i=bn[i],!i)return t.call(this);i=this.pa?i.Xa:i.pointerType;var s=yn(r,this.V,i.V);return s===null?t.call(this):this.qa?Re(i.V.ea,{X:i,W:s,ca:this,aa:e}):Re(i.V.ea,{X:i,W:s})},Pn=u.UnboundTypeError=Ae("UnboundTypeError");var gr={l:function(e,t,r){e=ut(e),t=ge(t,"wrapper"),r=Kt(r);var i=[].slice,s=t.V,l=s.ea,h=s.$.ea,f=s.$.constructor;e=Ee(e,function(){s.$.Ma.forEach(function(p){if(this[p]===h[p])throw new pn("Pure virtual function "+p+" must be implemented in JavaScript")}.bind(this)),Object.defineProperty(this,"__parent",{value:l}),this.__construct.apply(this,i.call(arguments))}),l.__construct=function(){this===l&&N("Pass correct 'this' to __construct");var p=f.implement.apply(void 0,[this].concat(i.call(arguments)));Ce(p);var T=p.U;p.notifyOnDestruction(),T.ma=!0,Object.defineProperties(this,{U:{value:T}}),se(this),p=T.W,p=Qe(s,p),zt.hasOwnProperty(p)?N("Tried to register registered instance: "+p):zt[p]=this},l.__destruct=function(){this===l&&N("Pass correct 'this' to __destruct"),Ce(this);var p=this.U.W;p=Qe(s,p),zt.hasOwnProperty(p)?delete zt[p]:N("Tried to unregister unregistered instance: "+p)},e.prototype=Object.create(l);for(var v in r)e.prototype[v]=r[v];return Ht(e)},I:function(e){var t=Ue[e];delete Ue[e];var r=t.xa,i=t.ha,s=t.Ja,l=s.map(h=>h.kb).concat(s.map(h=>h.vb));Ct([e],l,h=>{var f={};return s.forEach((v,p)=>{var T=h[p],I=v.ib,L=v.jb,B=h[p+s.length],A=v.ub,rt=v.wb;f[v.eb]={read:ct=>T.fromWireType(I(L,ct)),write:(ct,$)=>{var K=[];A(rt,ct,B.toWireType(K,$)),ye(K)}}}),[{name:t.name,fromWireType:function(v){var p={},T;for(T in f)p[T]=f[T].read(v);return i(v),p},toWireType:function(v,p){for(var T in f)if(!(T in p))throw new TypeError('Missing field:  "'+T+'"');var I=r();for(T in f)f[T].write(I,p[T]);return v!==null&&v.push(i,I),I},argPackAdvance:8,readValueFromPointer:be,ba:i}]})},x:function(){},B:function(e,t,r,i,s){var l=ke(r);t=ut(t),Xt(e,{name:t,fromWireType:function(h){return!!h},toWireType:function(h,f){return f?i:s},argPackAdvance:8,readValueFromPointer:function(h){if(r===1)var f=M;else if(r===2)f=X;else if(r===4)f=j;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(f[h>>l])},ba:null})},c:function(e,t,r,i,s,l,h,f,v,p,T,I,L){T=ut(T),l=wt(s,l),f&&(f=wt(h,f)),p&&(p=wt(v,p)),L=wt(I,L);var B=dn(T);Je(B,function(){Qt("Cannot construct "+T+" due to unbound types",[i])}),Ct([e,t,r],i?[i]:[],function(A){if(A=A[0],i)var rt=A.V,ct=rt.ea;else ct=Jt.prototype;A=Ee(B,function(){if(Object.getPrototypeOf(this)!==$)throw new oe("Use 'new' to construct "+T);if(K.ia===void 0)throw new oe(T+" has no accessible constructor");var Mt=K.ia[arguments.length];if(Mt===void 0)throw new oe("Tried to invoke ctor of "+T+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(K.ia).toString()+") parameters instead!");return Mt.apply(this,arguments)});var $=Object.create(ct,{constructor:{value:A}});A.prototype=$;var K=new Jn(T,A,$,L,rt,l,f,p);rt=new Zt(T,K,!0,!1),ct=new Zt(T+"*",K,!1,!1);var ft=new Zt(T+" const*",K,!1,!0);return bn[e]={pointerType:ct,Xa:ft},wn(B,A),[rt,ct,ft]})},h:function(e,t,r,i,s,l,h){var f=Oe(r,i);t=ut(t),l=wt(s,l),Ct([],[e],function(v){function p(){Qt("Cannot call "+T+" due to unbound types",f)}v=v[0];var T=v.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var I=v.V.constructor;return I[t]===void 0?(p.ja=r-1,I[t]=p):(Ke(I,t,T),I[t].Y[r-1]=p),Ct([],f,function(L){return L=xe(T,[L[0],null].concat(L.slice(1)),null,l,h),I[t].Y===void 0?(L.ja=r-1,I[t]=L):I[t].Y[r-1]=L,[]}),[]})},n:function(e,t,r,i,s,l,h,f){t=ut(t),l=wt(s,l),Ct([],[e],function(v){v=v[0];var p=v.name+"."+t,T={get:function(){Qt("Cannot access "+p+" due to unbound types",[r])},enumerable:!0,configurable:!0};return T.set=f?()=>{Qt("Cannot access "+p+" due to unbound types",[r])}:()=>{N(p+" is a read-only property")},Object.defineProperty(v.V.constructor,t,T),Ct([],[r],function(I){I=I[0];var L={get:function(){return I.fromWireType(l(i))},enumerable:!0};return f&&(f=wt(h,f),L.set=B=>{var A=[];f(i,I.toWireType(A,B)),ye(A)}),Object.defineProperty(v.V.constructor,t,L),[]}),[]})},k:function(e,t,r,i,s,l){0<t||pe();var h=Oe(t,r);s=wt(i,s),Ct([],[e],function(f){f=f[0];var v="constructor "+f.name;if(f.V.ia===void 0&&(f.V.ia=[]),f.V.ia[t-1]!==void 0)throw new oe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+f.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return f.V.ia[t-1]=()=>{Qt("Cannot construct "+f.name+" due to unbound types",h)},Ct([],h,function(p){return p.splice(1,0,null),f.V.ia[t-1]=xe(v,p,null,s,l),[]}),[]})},a:function(e,t,r,i,s,l,h,f){var v=Oe(r,i);t=ut(t),l=wt(s,l),Ct([],[e],function(p){function T(){Qt("Cannot call "+I+" due to unbound types",v)}p=p[0];var I=p.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&p.V.Ma.push(t);var L=p.V.ea,B=L[t];return B===void 0||B.Y===void 0&&B.className!==p.name&&B.ja===r-2?(T.ja=r-2,T.className=p.name,L[t]=T):(Ke(L,t,I),L[t].Y[r-2]=T),Ct([],v,function(A){return A=xe(I,A,p,l,h),L[t].Y===void 0?(A.ja=r-2,L[t]=A):L[t].Y[r-2]=A,[]}),[]})},b:function(e,t,r,i,s,l,h,f,v,p){t=ut(t),s=wt(i,s),Ct([],[e],function(T){T=T[0];var I=T.name+"."+t,L={get:function(){Qt("Cannot access "+I+" due to unbound types",[r,h])},enumerable:!0,configurable:!0};return L.set=v?()=>{Qt("Cannot access "+I+" due to unbound types",[r,h])}:()=>{N(I+" is a read-only property")},Object.defineProperty(T.V.ea,t,L),Ct([],v?[r,h]:[r],function(B){var A=B[0],rt={get:function(){var $=Tn(this,T,I+" getter");return A.fromWireType(s(l,$))},enumerable:!0};if(v){v=wt(f,v);var ct=B[1];rt.set=function($){var K=Tn(this,T,I+" setter"),ft=[];v(p,K,ct.toWireType(ft,$)),ye(ft)}}return Object.defineProperty(T.V.ea,t,rt),[]}),[]})},A:function(e,t){t=ut(t),Xt(e,{name:t,fromWireType:function(r){var i=Kt(r);return tn(r),i},toWireType:function(r,i){return Ht(i)},argPackAdvance:8,readValueFromPointer:be,ba:null})},j:function(e,t,r,i){function s(){}r=ke(r),t=ut(t),s.values={},Xt(e,{name:t,constructor:s,fromWireType:function(l){return this.constructor.values[l]},toWireType:function(l,h){return h.value},argPackAdvance:8,readValueFromPointer:ir(t,r,i),ba:null}),Je(t,s)},i:function(e,t,r){var i=ge(e,"enum");t=ut(t),e=i.constructor,i=Object.create(i.constructor.prototype,{value:{value:r},constructor:{value:Ee(i.name+"_"+t,function(){})}}),e.values[r]=i,e[t]=i},r:function(e,t,r){r=ke(r),t=ut(t),Xt(e,{name:t,fromWireType:function(i){return i},toWireType:function(i,s){return s},argPackAdvance:8,readValueFromPointer:ar(t,r),ba:null})},q:function(e,t,r,i,s,l){var h=Oe(t,r);e=ut(e),s=wt(i,s),Je(e,function(){Qt("Cannot call "+e+" due to unbound types",h)},t-1),Ct([],h,function(f){return wn(e,xe(e,[f[0],null].concat(f.slice(1)),null,s,l),t-1),[]})},g:function(e,t,r,i,s){t=ut(t),s===-1&&(s=4294967295),s=ke(r);var l=f=>f;if(i===0){var h=32-8*r;l=f=>f<<h>>>h}r=t.includes("unsigned")?function(f,v){return v>>>0}:function(f,v){return v},Xt(e,{name:t,fromWireType:l,toWireType:r,argPackAdvance:8,readValueFromPointer:or(t,s,i!==0),ba:null})},d:function(e,t,r){function i(l){l>>=2;var h=Y;return new s(E,h[l+1],h[l])}var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];r=ut(r),Xt(e,{name:r,fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{lb:!0})},s:function(e,t){t=ut(t);var r=t==="std::string";Xt(e,{name:t,fromWireType:function(i){var s=Y[i>>2],l=i+4;if(r)for(var h=l,f=0;f<=s;++f){var v=l+f;if(f==s||R[v]==0){if(h=h?g(R,h,v-h):"",p===void 0)var p=h;else p+=String.fromCharCode(0),p+=h;h=v+1}}else{for(p=Array(s),f=0;f<s;++f)p[f]=String.fromCharCode(R[l+f]);p=p.join("")}return Gt(i),p},toWireType:function(i,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var l,h=typeof s=="string";h||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||N("Cannot pass non-string to std::string");var f;if(r&&h)for(l=f=0;l<s.length;++l){var v=s.charCodeAt(l);127>=v?f++:2047>=v?f+=2:55296<=v&&57343>=v?(f+=4,++l):f+=3}else f=s.length;if(l=f,f=nn(4+l+1),v=f+4,Y[f>>2]=l,r&&h){if(h=v,v=l+1,l=R,0<v){v=h+v-1;for(var p=0;p<s.length;++p){var T=s.charCodeAt(p);if(55296<=T&&57343>=T){var I=s.charCodeAt(++p);T=65536+((T&1023)<<10)|I&1023}if(127>=T){if(h>=v)break;l[h++]=T}else{if(2047>=T){if(h+1>=v)break;l[h++]=192|T>>6}else{if(65535>=T){if(h+2>=v)break;l[h++]=224|T>>12}else{if(h+3>=v)break;l[h++]=240|T>>18,l[h++]=128|T>>12&63}l[h++]=128|T>>6&63}l[h++]=128|T&63}}l[h]=0}}else if(h)for(h=0;h<l;++h)p=s.charCodeAt(h),255<p&&(Gt(v),N("String has UTF-16 code units that do not fit in 8 bits")),R[v+h]=p;else for(h=0;h<l;++h)R[v+h]=s[h];return i!==null&&i.push(Gt,f),f},argPackAdvance:8,readValueFromPointer:be,ba:function(i){Gt(i)}})},p:function(e,t,r){if(r=ut(r),t===2)var i=sr,s=ur,l=lr,h=()=>nt,f=1;else t===4&&(i=cr,s=fr,l=hr,h=()=>Y,f=2);Xt(e,{name:r,fromWireType:function(v){for(var p=Y[v>>2],T=h(),I,L=v+4,B=0;B<=p;++B){var A=v+4+B*t;(B==p||T[A>>f]==0)&&(L=i(L,A-L),I===void 0?I=L:(I+=String.fromCharCode(0),I+=L),L=A+t)}return Gt(v),I},toWireType:function(v,p){typeof p!="string"&&N("Cannot pass non-string to C++ string type "+r);var T=l(p),I=nn(4+T+t);return Y[I>>2]=T>>f,s(p,I+4,T+t),v!==null&&v.push(Gt,I),I},argPackAdvance:8,readValueFromPointer:be,ba:function(v){Gt(v)}})},K:function(e,t,r,i,s,l){Ue[e]={name:ut(t),xa:wt(r,i),ha:wt(s,l),Ja:[]}},J:function(e,t,r,i,s,l,h,f,v,p){Ue[e].Ja.push({eb:ut(t),kb:r,ib:wt(i,s),jb:l,vb:h,ub:wt(f,v),wb:p})},C:function(e,t){t=ut(t),Xt(e,{nb:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},m:function(e,t,r){e=Kt(e),t=ge(t,"emval::as");var i=[],s=Ht(i);return Y[r>>2]=s,t.toWireType(i,e)},t:function(e,t,r,i,s){e=Fe[e],t=Kt(t),r=Le(r);var l=[];return Y[i>>2]=Ht(l),e(t,r,l,s)},f:function(e,t,r,i){e=Fe[e],t=Kt(t),r=Le(r),e(t,r,null,i)},L:tn,e:function(e,t){var r=mr(e,t),i=r[0];t=i.name+"_$"+r.slice(1).map(function(h){return h.name}).join("_")+"$";var s=An[t];if(s!==void 0)return s;var l=Array(e-1);return s=pr((h,f,v,p)=>{for(var T=0,I=0;I<e-1;++I)l[I]=r[I+1].readValueFromPointer(p+T),T+=r[I+1].argPackAdvance;for(h=h[f].apply(h,l),I=0;I<e-1;++I)r[I+1].Za&&r[I+1].Za(l[I]);if(!i.nb)return i.toWireType(v,h)}),An[t]=s},D:function(e){return e=Le(e),Ht(u[e])},H:function(e,t){return e=Kt(e),t=Kt(t),Ht(e[t])},E:function(e){4<e&&(Lt[e].ya+=1)},G:function(e){return Ht(Le(e))},F:function(e){var t=Kt(e);ye(t),tn(e)},u:function(e,t){return e=ge(e,"_emval_take_value"),e=e.readValueFromPointer(t),Ht(e)},v:function(){pe("")},o:function(e){var t=R.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var s=Math;i=Math.max(e,i),s=s.min.call(s,2147483648,i+(65536-i%65536)%65536);t:{try{o.grow(s-E.byteLength+65535>>>16),lt();var l=1;break t}catch{}l=void 0}if(l)return!0}return!1},z:function(){return 52},w:function(){return 70},y:function(e,t,r,i){for(var s=0,l=0;l<r;l++){var h=Y[t>>2],f=Y[t+4>>2];t+=8;for(var v=0;v<f;v++){var p=R[h+v],T=vr[e];p===0||p===10?((e===1?Nt:ot)(g(T,0)),T.length=0):T.push(p)}s+=f}return Y[i>>2]=s,0}};(function(){function e(s){u.asm=s.exports,o=u.asm.M,lt(),Ot=u.asm.S,ae.unshift(u.asm.N),ee--,u.monitorRunDependencies&&u.monitorRunDependencies(ee),ee==0&&de&&(s=de,de=null,s())}function t(s){e(s.instance)}function r(s){return qn().then(function(l){return WebAssembly.instantiate(l,i)}).then(function(l){return l}).then(s,function(l){ot("failed to asynchronously prepare wasm: "+l),pe(l)})}var i={a:gr};if(ee++,u.monitorRunDependencies&&u.monitorRunDependencies(ee),u.instantiateWasm)try{return u.instantiateWasm(i,e)}catch(s){return ot("Module.instantiateWasm callback failed with error: "+s),!1}return function(){return xt||typeof WebAssembly.instantiateStreaming!="function"||cn()||It.startsWith("file://")||typeof fetch!="function"?r(t):fetch(It,{credentials:"same-origin"}).then(function(s){return WebAssembly.instantiateStreaming(s,i).then(t,function(l){return ot("wasm streaming compile failed: "+l),ot("falling back to ArrayBuffer instantiation"),r(t)})})}().catch(dt),{}})(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.N).apply(null,arguments)};var Gt=u._free=function(){return(Gt=u._free=u.asm.O).apply(null,arguments)},nn=u._malloc=function(){return(nn=u._malloc=u.asm.P).apply(null,arguments)},Mn=u.___getTypeName=function(){return(Mn=u.___getTypeName=u.asm.Q).apply(null,arguments)};u.__embind_initialize_bindings=function(){return(u.__embind_initialize_bindings=u.asm.R).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.T).apply(null,arguments)};var je;de=function e(){je||Rn(),je||(de=e)};function Rn(){function e(){if(!je&&(je=!0,u.calledRun=!0,!n)){if(He(ae),z(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();ln.unshift(t)}He(ln)}}if(!(0<ee)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Gn();He(At),0<ee||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Rn(),U.ready}})();const P=k},w=>{w.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"1.0.96","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(w,C,_)=>{_.r(C),_.d(C,{registerTouchInteractions:()=>k.registerTouchInteractions});var k=_(4)},(w,C,_)=>{_.r(C),_.d(C,{registerTouchInteractions:()=>k});const k=({canvas:P,artboard:V,stateMachines:U=[],renderer:u,rive:z,fit:dt,alignment:tt})=>{if(!P||!U.length||!u||!z||!V)return null;const at=(D=>{const F=D.currentTarget.getBoundingClientRect(),G=D.clientX-F.left,et=D.clientY-F.top,pt=z.computeAlignment(dt,tt,{minX:0,minY:0,maxX:F.width,maxY:F.height},V.bounds);let St=new z.Mat2D;pt.invert(St);const Nt=new z.Vec2D(G,et),ot=z.mapXY(St,Nt),xt=ot.x(),o=ot.y();switch(ot.delete(),St.delete(),Nt.delete(),pt.delete(),D.type){case"mouseover":case"mouseout":case"mousemove":{for(const n of U)n.pointerMove(xt,o);break}case"mousedown":{for(const n of U)n.pointerDown(xt,o);break}case"mouseup":{for(const n of U)n.pointerUp(xt,o);break}}}).bind(void 0);return P.addEventListener("mouseover",at),P.addEventListener("mouseout",at),P.addEventListener("mousemove",at),P.addEventListener("mousedown",at),P.addEventListener("mouseup",at),()=>{P.removeEventListener("mouseover",at),P.removeEventListener("mouseout",at),P.removeEventListener("mousemove",at),P.removeEventListener("mousedown",at),P.removeEventListener("mouseup",at)}}}],m={};function b(w){var C=m[w];if(C!==void 0)return C.exports;var _=m[w]={exports:{}};return d[w](_,_.exports,b),_.exports}b.d=(w,C)=>{for(var _ in C)b.o(C,_)&&!b.o(w,_)&&Object.defineProperty(w,_,{enumerable:!0,get:C[_]})},b.o=(w,C)=>Object.prototype.hasOwnProperty.call(w,C),b.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var S={};return(()=>{b.r(S),b.d(S,{Fit:()=>V,Alignment:()=>U,Layout:()=>u,RuntimeLoader:()=>z,StateMachineInputType:()=>tt,StateMachineInput:()=>W,EventType:()=>F,LoopType:()=>G,Rive:()=>St,Testing:()=>xt});var w=b(1),C=b(2),_=b(3),k=function(o,n,a,g){function E(M){return M instanceof a?M:new a(function(R){R(M)})}return new(a||(a=Promise))(function(M,R){function X(Y){try{j(g.next(Y))}catch(bt){R(bt)}}function nt(Y){try{j(g.throw(Y))}catch(bt){R(bt)}}function j(Y){Y.done?M(Y.value):E(Y.value).then(X,nt)}j((g=g.apply(o,n||[])).next())})},P=function(o,n){var a={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},g,E,M,R;return R={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function X(j){return function(Y){return nt([j,Y])}}function nt(j){if(g)throw new TypeError("Generator is already executing.");for(;a;)try{if(g=1,E&&(M=j[0]&2?E.return:j[0]?E.throw||((M=E.return)&&M.call(E),0):E.next)&&!(M=M.call(E,j[1])).done)return M;switch(E=0,M&&(j=[j[0]&2,M.value]),j[0]){case 0:case 1:M=j;break;case 4:return a.label++,{value:j[1],done:!1};case 5:a.label++,E=j[1],j=[0];continue;case 7:j=a.ops.pop(),a.trys.pop();continue;default:if(M=a.trys,!(M=M.length>0&&M[M.length-1])&&(j[0]===6||j[0]===2)){a=0;continue}if(j[0]===3&&(!M||j[1]>M[0]&&j[1]<M[3])){a.label=j[1];break}if(j[0]===6&&a.label<M[1]){a.label=M[1],M=j;break}if(M&&a.label<M[2]){a.label=M[2],a.ops.push(j);break}M[2]&&a.ops.pop(),a.trys.pop();continue}j=n.call(o,a)}catch(Y){j=[6,Y],E=0}finally{g=M=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}},V;(function(o){o.Cover="cover",o.Contain="contain",o.Fill="fill",o.FitWidth="fitWidth",o.FitHeight="fitHeight",o.None="none",o.ScaleDown="scaleDown"})(V||(V={}));var U;(function(o){o.Center="center",o.TopLeft="topLeft",o.TopCenter="topCenter",o.TopRight="topRight",o.CenterLeft="centerLeft",o.CenterRight="centerRight",o.BottomLeft="bottomLeft",o.BottomCenter="bottomCenter",o.BottomRight="bottomRight"})(U||(U={}));var u=function(){function o(n){var a,g,E,M,R,X;this.fit=(a=n==null?void 0:n.fit)!==null&&a!==void 0?a:V.Contain,this.alignment=(g=n==null?void 0:n.alignment)!==null&&g!==void 0?g:U.Center,this.minX=(E=n==null?void 0:n.minX)!==null&&E!==void 0?E:0,this.minY=(M=n==null?void 0:n.minY)!==null&&M!==void 0?M:0,this.maxX=(R=n==null?void 0:n.maxX)!==null&&R!==void 0?R:0,this.maxY=(X=n==null?void 0:n.maxY)!==null&&X!==void 0?X:0}return o.new=function(n){var a=n.fit,g=n.alignment,E=n.minX,M=n.minY,R=n.maxX,X=n.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new o({fit:a,alignment:g,minX:E,minY:M,maxX:R,maxY:X})},o.prototype.copyWith=function(n){var a=n.fit,g=n.alignment,E=n.minX,M=n.minY,R=n.maxX,X=n.maxY;return new o({fit:a??this.fit,alignment:g??this.alignment,minX:E??this.minX,minY:M??this.minY,maxX:R??this.maxX,maxY:X??this.maxY})},o.prototype.runtimeFit=function(n){if(this.cachedRuntimeFit)return this.cachedRuntimeFit;var a;return this.fit===V.Cover?a=n.Fit.cover:this.fit===V.Contain?a=n.Fit.contain:this.fit===V.Fill?a=n.Fit.fill:this.fit===V.FitWidth?a=n.Fit.fitWidth:this.fit===V.FitHeight?a=n.Fit.fitHeight:this.fit===V.ScaleDown?a=n.Fit.scaleDown:a=n.Fit.none,this.cachedRuntimeFit=a,a},o.prototype.runtimeAlignment=function(n){if(this.cachedRuntimeAlignment)return this.cachedRuntimeAlignment;var a;return this.alignment===U.TopLeft?a=n.Alignment.topLeft:this.alignment===U.TopCenter?a=n.Alignment.topCenter:this.alignment===U.TopRight?a=n.Alignment.topRight:this.alignment===U.CenterLeft?a=n.Alignment.centerLeft:this.alignment===U.CenterRight?a=n.Alignment.centerRight:this.alignment===U.BottomLeft?a=n.Alignment.bottomLeft:this.alignment===U.BottomCenter?a=n.Alignment.bottomCenter:this.alignment===U.BottomRight?a=n.Alignment.bottomRight:a=n.Alignment.center,this.cachedRuntimeAlignment=a,a},o}(),z=function(){function o(){}return o.loadRuntime=function(){w.default({locateFile:function(){return o.wasmURL}}).then(function(n){var a;for(o.runtime=n;o.callBackQueue.length>0;)(a=o.callBackQueue.shift())===null||a===void 0||a(o.runtime)})},o.getInstance=function(n){o.isLoading||(o.isLoading=!0,o.loadRuntime()),o.runtime?n(o.runtime):o.callBackQueue.push(n)},o.awaitInstance=function(){return new Promise(function(n){return o.getInstance(function(a){return n(a)})})},o.setWasmUrl=function(n){o.wasmURL=n},o.isLoading=!1,o.callBackQueue=[],o.wasmURL="https://unpkg.com/"+C.name+"@"+C.version+"/rive.wasm",o}(),dt=function(){function o(n,a,g,E){this.animation=n,this.artboard=a,this.playing=E,this.loopCount=0,this.scrubTo=null,this.instance=new g.LinearAnimationInstance(n,a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"time",{get:function(){return this.instance.time},set:function(n){this.instance.time=n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.scrubTo===null?this.instance.advance(n):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},o.prototype.apply=function(n){this.instance.apply(n)},Object.defineProperty(o.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.instance.delete()},o}(),tt;(function(o){o[o.Number=56]="Number",o[o.Trigger=58]="Trigger",o[o.Boolean=59]="Boolean"})(tt||(tt={}));var W=function(){function o(n,a){this.type=n,this.runtimeInput=a}return Object.defineProperty(o.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(n){this.runtimeInput.value=n},enumerable:!1,configurable:!0}),o.prototype.fire=function(){this.type===tt.Trigger&&this.runtimeInput.fire()},o}(),at=function(){function o(n,a,g,E){this.stateMachine=n,this.playing=g,this.artboard=E,this.inputs=[],this.instance=new a.StateMachineInstance(n,E),this.initInputs(a)}return Object.defineProperty(o.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"statesChanged",{get:function(){for(var n=[],a=0;a<this.instance.stateChangedCount();a++)n.push(this.instance.stateChangedNameByIndex(a));return n},enumerable:!1,configurable:!0}),o.prototype.advance=function(n){this.instance.advance(n)},o.prototype.initInputs=function(n){for(var a=0;a<this.instance.inputCount();a++){var g=this.instance.input(a);this.inputs.push(this.mapRuntimeInput(g,n))}},o.prototype.mapRuntimeInput=function(n,a){if(n.type===a.SMIInput.bool)return new W(tt.Boolean,n.asBool());if(n.type===a.SMIInput.number)return new W(tt.Number,n.asNumber());if(n.type===a.SMIInput.trigger)return new W(tt.Trigger,n.asTrigger())},o.prototype.cleanup=function(){this.instance.delete()},o}(),D=function(){function o(n,a,g,E,M){E===void 0&&(E=[]),M===void 0&&(M=[]),this.runtime=n,this.artboard=a,this.eventManager=g,this.animations=E,this.stateMachines=M}return o.prototype.add=function(n,a,g){if(g===void 0&&(g=!0),n=ot(n),n.length===0)this.animations.forEach(function(lt){return lt.playing=a}),this.stateMachines.forEach(function(lt){return lt.playing=a});else{var E=this.animations.map(function(lt){return lt.name}),M=this.stateMachines.map(function(lt){return lt.name});for(var R in n){var X=E.indexOf(n[R]),nt=M.indexOf(n[R]);if(X>=0||nt>=0)X>=0?this.animations[X].playing=a:this.stateMachines[nt].playing=a;else{var j=this.artboard.animationByName(n[R]);if(j){var Y=new dt(j,this.artboard,this.runtime,a);Y.advance(0),Y.apply(1),this.animations.push(Y)}else{var bt=this.artboard.stateMachineByName(n[R]);if(bt){var kt=new at(bt,this.runtime,a,this.artboard);this.stateMachines.push(kt)}}}}}return g&&(a?this.eventManager.fire({type:F.Play,data:this.playing}):this.eventManager.fire({type:F.Pause,data:this.paused})),a?this.playing:this.paused},o.prototype.play=function(n){return this.add(n,!0)},o.prototype.pause=function(n){return this.add(n,!1)},o.prototype.scrub=function(n,a){var g=this.animations.filter(function(E){return n.includes(E.name)});return g.forEach(function(E){return E.scrubTo=a}),g.map(function(E){return E.name})},Object.defineProperty(o.prototype,"playing",{get:function(){return this.animations.filter(function(n){return n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"paused",{get:function(){return this.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}).concat(this.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}))},enumerable:!1,configurable:!0}),o.prototype.stop=function(n){var a=this;n=ot(n);var g=[];if(n.length===0)g=this.animations.map(function(R){return R.name}).concat(this.stateMachines.map(function(R){return R.name})),this.animations.forEach(function(R){return R.cleanup()}),this.stateMachines.forEach(function(R){return R.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var E=this.animations.filter(function(R){return n.includes(R.name)});E.forEach(function(R){R.cleanup(),a.animations.splice(a.animations.indexOf(R),1)});var M=this.stateMachines.filter(function(R){return n.includes(R.name)});M.forEach(function(R){R.cleanup(),a.stateMachines.splice(a.stateMachines.indexOf(R),1)}),g=E.map(function(R){return R.name}).concat(M.map(function(R){return R.name}))}return this.eventManager.fire({type:F.Stop,data:g}),g},Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(n,a){return n||a.playing},!1)||this.stateMachines.reduce(function(n,a){return n||a.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),o.prototype.atLeastOne=function(n,a){a===void 0&&(a=!0);var g;return this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([g=this.artboard.animationByIndex(0).name],n,a):this.artboard.stateMachineCount()>0&&this.add([g=this.artboard.stateMachineByIndex(0).name],n,a)),g},o.prototype.handleLooping=function(){for(var n=0,a=this.animations.filter(function(E){return E.playing});n<a.length;n++){var g=a[n];g.loopValue===0&&g.loopCount?(g.loopCount=0,this.stop(g.name)):g.loopValue===1&&g.loopCount?(this.eventManager.fire({type:F.Loop,data:{animation:g.name,type:G.Loop}}),g.loopCount=0):g.loopValue===2&&g.loopCount>1&&(this.eventManager.fire({type:F.Loop,data:{animation:g.name,type:G.PingPong}}),g.loopCount=0)}},o.prototype.handleStateChanges=function(){for(var n=[],a=0,g=this.stateMachines.filter(function(M){return M.playing});a<g.length;a++){var E=g[a];n.push.apply(n,E.statesChanged)}n.length>0&&this.eventManager.fire({type:F.StateChange,data:n})},o}(),F;(function(o){o.Load="load",o.LoadError="loaderror",o.Play="play",o.Pause="pause",o.Stop="stop",o.Loop="loop",o.Draw="draw",o.StateChange="statechange"})(F||(F={}));var G;(function(o){o.OneShot="oneshot",o.Loop="loop",o.PingPong="pingpong"})(G||(G={}));var et=function(){function o(n){n===void 0&&(n=[]),this.listeners=n}return o.prototype.getListeners=function(n){return this.listeners.filter(function(a){return a.type===n})},o.prototype.add=function(n){this.listeners.includes(n)||this.listeners.push(n)},o.prototype.remove=function(n){for(var a=0;a<this.listeners.length;a++){var g=this.listeners[a];if(g.type===n.type&&g.callback===n.callback){this.listeners.splice(a,1);break}}},o.prototype.removeAll=function(n){var a=this;n?this.listeners.filter(function(g){return g.type===n}).forEach(function(g){return a.remove(g)}):this.listeners.splice(0,this.listeners.length)},o.prototype.fire=function(n){var a=this.getListeners(n.type);a.forEach(function(g){return g.callback(n)})},o}(),pt=function(){function o(n){this.eventManager=n,this.queue=[]}return o.prototype.add=function(n){this.queue.push(n)},o.prototype.process=function(){for(;this.queue.length>0;){var n=this.queue.shift();n!=null&&n.action&&n.action(),n!=null&&n.event&&this.eventManager.fire(n.event)}},o}(),St=function(){function o(n){var a;this._updateLayout=!0,this.isRendererActive=!0,this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.renderSecondTimer=0,this.canvas=n.canvas,this.src=n.src,this.buffer=n.buffer,this.layout=(a=n.layout)!==null&&a!==void 0?a:new u,this.eventManager=new et,n.onLoad&&this.on(F.Load,n.onLoad),n.onLoadError&&this.on(F.LoadError,n.onLoadError),n.onPlay&&this.on(F.Play,n.onPlay),n.onPause&&this.on(F.Pause,n.onPause),n.onStop&&this.on(F.Stop,n.onStop),n.onLoop&&this.on(F.Loop,n.onLoop),n.onStateChange&&this.on(F.StateChange,n.onStateChange),n.onload&&!n.onLoad&&this.on(F.Load,n.onload),n.onloaderror&&!n.onLoadError&&this.on(F.LoadError,n.onloaderror),n.onplay&&!n.onPlay&&this.on(F.Play,n.onplay),n.onpause&&!n.onPause&&this.on(F.Pause,n.onpause),n.onstop&&!n.onStop&&this.on(F.Stop,n.onstop),n.onloop&&!n.onLoop&&this.on(F.Loop,n.onloop),n.onstatechange&&!n.onStateChange&&this.on(F.StateChange,n.onstatechange),this.taskQueue=new pt(this.eventManager),this.init({src:this.src,buffer:this.buffer,autoplay:n.autoplay,animations:n.animations,stateMachines:n.stateMachines,artboard:n.artboard,useOffscreenRenderer:n.useOffscreenRenderer})}return o.new=function(n){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new o(n)},o.prototype.init=function(n){var a=this,g=n.src,E=n.buffer,M=n.animations,R=n.stateMachines,X=n.artboard,nt=n.autoplay,j=nt===void 0?!1:nt,Y=n.useOffscreenRenderer,bt=Y===void 0?!1:Y;if(this.src=g,this.buffer=E,!this.src&&!this.buffer)throw new Error(o.missingErrorMessage);var kt=ot(M),lt=ot(R);this.loaded=!1,this.readyForPlaying=!1,z.awaitInstance().then(function(Ot){a.runtime=Ot,a.renderer=a.runtime.makeRenderer(a.canvas,bt),a.canvas.width||a.canvas.height||a.resizeDrawingSurfaceToCanvas(),a.initData(X,kt,lt,j).then(function(){var At=(a.animator.stateMachines||[]).filter(function(ae){return ae.playing}).map(function(ae){return ae.instance});a.eventCleanup=(0,_.registerTouchInteractions)({canvas:a.canvas,artboard:a.artboard,stateMachines:At,renderer:a.renderer,rive:a.runtime,fit:a._layout.runtimeFit(a.runtime),alignment:a._layout.runtimeAlignment(a.runtime)})}).catch(function(At){console.error(At)})}).catch(function(Ot){console.error(Ot)})},o.prototype.initData=function(n,a,g,E){var M;return k(this,void 0,void 0,function(){var R,X,nt;return P(this,function(j){switch(j.label){case 0:return this.src?(R=this,[4,Nt(this.src)]):[3,2];case 1:R.buffer=j.sent(),j.label=2;case 2:return X=this,[4,this.runtime.load(new Uint8Array(this.buffer))];case 3:return X.file=j.sent(),this.file?(this.initArtboard(n,a,g,E),this.loaded=!0,this.eventManager.fire({type:F.Load,data:(M=this.src)!==null&&M!==void 0?M:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()]):(nt="Problem loading file; may be corrupt!",console.warn(nt),this.eventManager.fire({type:F.LoadError,data:nt}),[2,Promise.reject(nt)])}})})},o.prototype.initArtboard=function(n,a,g,E){var M=n?this.file.artboardByName(n):this.file.defaultArtboard();if(!M){var R="Invalid artboard name or no default artboard";console.warn(R),this.eventManager.fire({type:F.LoadError,data:R});return}if(this.artboard=M,this.artboard.animationCount()<1){var R="Artboard has no animations";throw this.eventManager.fire({type:F.LoadError,data:R}),R}this.animator=new D(this.runtime,this.artboard,this.eventManager);var X;a.length>0||g.length>0?(X=a.concat(g),this.animator.add(X,E,!1)):X=[this.animator.atLeastOne(E,!1)],this.taskQueue.add({event:{type:E?F.Play:F.Pause,data:X}})},o.prototype.drawFrame=function(){this.startRendering()},o.prototype.draw=function(n,a){var g=performance.now();this.frameRequestId=null,this.lastRenderTime||(this.lastRenderTime=n),this.renderSecondTimer+=n-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,a==null||a());var E=(n-this.lastRenderTime)/1e3;this.lastRenderTime=n;for(var M=this.animator.animations.filter(function(At){return At.playing||At.needsScrub}).sort(function(At){return At.needsScrub?-1:1}),R=0,X=M;R<X.length;R++){var nt=X[R];nt.advance(E),nt.instance.didLoop&&(nt.loopCount+=1),nt.apply(1)}for(var j=this.animator.stateMachines.filter(function(At){return At.playing}),Y=0,bt=j;Y<bt.length;Y++){var kt=bt[Y];kt.advance(E)}this.artboard.advance(E);var lt=this.renderer;lt.clear(),lt.save(),this.alignRenderer(),this.artboard.draw(lt),lt.restore(),lt.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.frameCount++;var Ot=performance.now();for(this.frameTimes.push(Ot),this.durations.push(Ot-g);this.frameTimes[0]<=Ot-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():this.animator.isPaused?this.lastRenderTime=0:this.animator.isStopped&&(this.lastRenderTime=0)},o.prototype.alignRenderer=function(){var n=this,a=n.renderer,g=n.runtime,E=n._layout,M=n.artboard;a.align(E.runtimeFit(g),E.runtimeAlignment(g),{minX:E.minX,minY:E.minY,maxX:E.maxX,maxY:E.maxY},M.bounds)},Object.defineProperty(o.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(n,a){return n+a},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),o.prototype.cleanup=function(){this.stopRendering(),this.cleanupInstances(),this.renderer.delete(),this.file.delete()},o.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},o.prototype.play=function(n,a){var g=this;if(n=ot(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return g.play(n,a)}});return}this.animator.play(n),this.startRendering()},o.prototype.pause=function(n){var a=this;if(n=ot(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.pause(n)}});return}this.animator.pause(n)},o.prototype.scrub=function(n,a){var g=this;if(n=ot(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return g.scrub(n,a)}});return}this.animator.scrub(n,a||0),this.drawFrame()},o.prototype.stop=function(n){var a=this;if(n=ot(n),!this.readyForPlaying){this.taskQueue.add({action:function(){return a.stop(n)}});return}this.animator.stop(n)},o.prototype.reset=function(n){var a,g=n==null?void 0:n.artboard,E=ot(n==null?void 0:n.animations),M=ot(n==null?void 0:n.stateMachines),R=(a=n==null?void 0:n.autoplay)!==null&&a!==void 0?a:!1;this.cleanupInstances(),this.initArtboard(g,E,M,R),this.taskQueue.process()},o.prototype.load=function(n){this.stop(),this.init(n)},Object.defineProperty(o.prototype,"layout",{get:function(){return this._layout},set:function(n){this._layout=n,(!n.maxX||!n.maxY)&&this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),o.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},o.prototype.resizeDrawingSurfaceToCanvas=function(){if(this.canvas instanceof HTMLCanvasElement&&!!window){var n=this.canvas.getBoundingClientRect(),a=n.width,g=n.height,E=window.devicePixelRatio||1;this.canvas.width=E*a,this.canvas.height=E*g,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(o.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"animationNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.animationCount();a++)n.push(this.artboard.animationByIndex(a).name);return n},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stateMachineNames",{get:function(){if(!this.loaded)return[];for(var n=[],a=0;a<this.artboard.stateMachineCount();a++)n.push(this.artboard.stateMachineByIndex(a).name);return n},enumerable:!1,configurable:!0}),o.prototype.stateMachineInputs=function(n){if(!!this.loaded){var a=this.animator.stateMachines.find(function(g){return g.name===n});return a==null?void 0:a.inputs}},Object.defineProperty(o.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(n){return!n.playing}).map(function(n){return n.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),o.prototype.on=function(n,a){this.eventManager.add({type:n,callback:a})},o.prototype.unsubscribe=function(n,a){this.eventManager.remove({type:n,callback:a})},o.prototype.unsubscribeAll=function(n){this.eventManager.removeAll(n)},o.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},o.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},o.prototype.enableFPSCounter=function(n){this.runtime.enableFPSCounter(n)},o.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(o.prototype,"contents",{get:function(){if(!!this.loaded){for(var n={artboards:[]},a=0;a<this.file.artboardCount();a++){for(var g=this.file.artboardByIndex(a),E={name:g.name,animations:[],stateMachines:[]},M=0;M<g.animationCount();M++){var R=g.animationByIndex(M);E.animations.push(R.name)}for(var X=0;X<g.stateMachineCount();X++){for(var nt=g.stateMachineByIndex(X),j=nt.name,Y=new this.runtime.StateMachineInstance(nt,g),bt=[],kt=0;kt<Y.inputCount();kt++){var lt=Y.input(kt);bt.push({name:lt.name,type:lt.type})}E.stateMachines.push({name:j,inputs:bt})}n.artboards.push(E)}return n}},enumerable:!1,configurable:!0}),o.missingErrorMessage="Rive source file or data buffer required",o}(),Nt=function(o){return k(void 0,void 0,void 0,function(){var n,a,g;return P(this,function(E){switch(E.label){case 0:return n=new Request(o),[4,fetch(n)];case 1:return a=E.sent(),[4,a.arrayBuffer()];case 2:return g=E.sent(),[2,g]}})})},ot=function(o){return typeof o=="string"?[o]:o instanceof Array?o:[]},xt={EventManager:et,TaskQueueManager:pt}})(),S})()})})(Qn);function Vr(O){let c,d,m,b,S;return{c(){c=Pt("canvas"),this.h()},l(w){c=Tt(w,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),vt(c).forEach(Q),this.h()},h(){Z(c,"class",d=xn(O[3].class)+" svelte-q52jml"),Z(c,"style",m=O[3].style),Z(c,"width",b=O[0]+"px"),Z(c,"height",S=O[1]+"px")},m(w,C){yt(w,c,C),O[9](c)},p(w,[C]){C&8&&d!==(d=xn(w[3].class)+" svelte-q52jml")&&Z(c,"class",d),C&8&&m!==(m=w[3].style)&&Z(c,"style",m),C&1&&b!==(b=w[0]+"px")&&Z(c,"width",b),C&2&&S!==(S=w[1]+"px")&&Z(c,"height",S)},i:ce,o:ce,d(w){w&&Q(c),O[9](null)}}}function Br(O,c,d){let{width:m}=c,{height:b}=c,{src:S}=c,{autoplay:w=!0}=c,{onPlay:C=void 0}=c,{onStop:_=void 0}=c,{onPause:k=void 0}=c,P,V;zn(()=>(V=new Qn.exports.Rive({canvas:P,src:S,autoplay:w,onPlay:()=>C&&C(),onStop:()=>_&&_(),onPause:()=>k&&k()}),()=>V.cleanup()));function U(u){sn[u?"unshift":"push"](()=>{P=u,d(2,P)})}return O.$$set=u=>{d(3,c=On(On({},c),Ln(u))),"width"in u&&d(0,m=u.width),"height"in u&&d(1,b=u.height),"src"in u&&d(4,S=u.src),"autoplay"in u&&d(5,w=u.autoplay),"onPlay"in u&&d(6,C=u.onPlay),"onStop"in u&&d(7,_=u.onStop),"onPause"in u&&d(8,k=u.onPause)},c=Ln(c),[m,b,P,c,S,w,C,_,k,U]}class Xr extends $e{constructor(c){super(),Ye(this,c,Br,Vr,Ne,{width:0,height:1,src:4,autoplay:5,onPlay:6,onStop:7,onPause:8})}}function $r(O){let c,d,m;return{c(){c=an("svg"),d=an("path"),m=an("path"),this.h()},l(b){c=on(b,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var S=vt(c);d=on(S,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),vt(d).forEach(Q),m=on(S,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),vt(m).forEach(Q),S.forEach(Q),this.h()},h(){Z(d,"d","M12 5V19"),Z(d,"stroke","black"),Z(d,"stroke-width","2"),Z(d,"stroke-linecap","round"),Z(d,"stroke-linejoin","round"),Z(m,"d","M5 12H19"),Z(m,"stroke","black"),Z(m,"stroke-width","2"),Z(m,"stroke-linecap","round"),Z(m,"stroke-linejoin","round"),Z(c,"width","22"),Z(c,"height","22"),Z(c,"viewBox","0 0 24 24"),Z(c,"fill","none"),Z(c,"xmlns","http://www.w3.org/2000/svg")},m(b,S){yt(b,c,S),ht(c,d),ht(c,m)},p:ce,i:ce,o:ce,d(b){b&&Q(c)}}}class Yr extends $e{constructor(c){super(),Ye(this,c,null,$r,Ne,{})}}function Nr(O){let c;return{c(){c=fe("Create")},l(d){c=he(d,"Create")},m(d,m){yt(d,c,m)},d(d){d&&Q(c)}}}function Hr(O){let c,d,m,b,S,w,C,_,k,P,V,U,u,z;d=new jn({props:{title:"Form Name",description:"Name of your form, that will be displayed on the welcome page."}});function dt(D){O[8](D)}let tt={error:O[2].name};O[0].name!==void 0&&(tt.value=O[0].name),b=new Ar({props:tt}),sn.push(()=>Fn(b,"value",dt,O[0].name)),b.$on("keyup",O[9]),_=new jn({props:{title:"Color Scheme",description:"Accent color that will be used in the editor of your forms UI"}});function W(D){O[10](D)}let at={};return O[0].color!==void 0&&(at.value=O[0].color),P=new Rr({props:at}),sn.push(()=>Fn(P,"value",W,O[0].color)),u=new Zn({props:{position:"right",disabled:O[1],$$slots:{default:[Nr]},$$scope:{ctx:O}}}),u.$on("click",O[7]),{c(){c=Pt("div"),jt(d.$$.fragment),m=Rt(),jt(b.$$.fragment),w=Rt(),C=Pt("div"),jt(_.$$.fragment),k=Rt(),jt(P.$$.fragment),U=Rt(),jt(u.$$.fragment)},l(D){c=Tt(D,"DIV",{});var F=vt(c);Dt(d.$$.fragment,F),m=Ut(F),Dt(b.$$.fragment,F),F.forEach(Q),w=Ut(D),C=Tt(D,"DIV",{});var G=vt(C);Dt(_.$$.fragment,G),k=Ut(G),Dt(P.$$.fragment,G),G.forEach(Q),U=Ut(D),Dt(u.$$.fragment,D)},m(D,F){yt(D,c,F),Vt(d,c,null),ht(c,m),Vt(b,c,null),yt(D,w,F),yt(D,C,F),Vt(_,C,null),ht(C,k),Vt(P,C,null),yt(D,U,F),Vt(u,D,F),z=!0},p(D,F){const G={};F&4&&(G.error=D[2].name),!S&&F&1&&(S=!0,G.value=D[0].name,Wn(()=>S=!1)),b.$set(G);const et={};!V&&F&1&&(V=!0,et.value=D[0].color,Wn(()=>V=!1)),P.$set(et);const pt={};F&2&&(pt.disabled=D[1]),F&16384&&(pt.$$scope={dirty:F,ctx:D}),u.$set(pt)},i(D){z||(st(d.$$.fragment,D),st(b.$$.fragment,D),st(_.$$.fragment,D),st(P.$$.fragment,D),st(u.$$.fragment,D),z=!0)},o(D){gt(d.$$.fragment,D),gt(b.$$.fragment,D),gt(_.$$.fragment,D),gt(P.$$.fragment,D),gt(u.$$.fragment,D),z=!1},d(D){D&&Q(c),Bt(d),Bt(b),D&&Q(w),D&&Q(C),Bt(_),Bt(P),D&&Q(U),Bt(u,D)}}}function zr(O){let c,d;return c=new Cr({props:{title:"Create Form",$$slots:{default:[Hr]},$$scope:{ctx:O}}}),{c(){jt(c.$$.fragment)},l(m){Dt(c.$$.fragment,m)},m(m,b){Vt(c,m,b),d=!0},p(m,[b]){const S={};b&16391&&(S.$$scope={dirty:b,ctx:m}),c.$set(S)},i(m){d||(st(c.$$.fragment,m),d=!0)},o(m){gt(c.$$.fragment,m),d=!1},d(m){Bt(c,m)}}}function Zr(O,c,d){let m,b,S;const w={name:"",color:"orange"},C={name:W=>{if(W.length<4)throw new TypeError("Name must be at least 4 characters")}},{errors:_,hasErrors:k,values:P,validate:V,resetKeyError:U}=Mr(w,C);De(O,_,W=>d(2,S=W)),De(O,k,W=>d(1,b=W)),De(O,P,W=>d(0,m=W));async function u(){if(V(),b)return;const W={...m};W.key=W.key||Ur(),W.font=W.font||"system",W.style=W.style||"clean",W.color=W.color||"orange",W.slug=W.slug||Sr(W.name),W.screens=W.screens||[],await kr("/api/forms",W),await Ir(),xr(),await Or(`/editor/${W.key}`)}function z(W){O.$$.not_equal(m.name,W)&&(m.name=W,P.set(m))}const dt=()=>U("name");function tt(W){O.$$.not_equal(m.color,W)&&(m.color=W,P.set(m))}return[m,b,S,_,k,P,U,u,z,dt,tt]}class Qr extends $e{constructor(c){super(),Ye(this,c,Zr,zr,Ne,{})}}const{document:Vn}=_r;function Bn(O,c,d){const m=O.slice();return m[7]=c[d],m}function Xn(O){let c,d;return c=new Qr({}),{c(){jt(c.$$.fragment)},l(m){Dt(c.$$.fragment,m)},m(m,b){Vt(c,m,b),d=!0},i(m){d||(st(c.$$.fragment,m),d=!0)},o(m){gt(c.$$.fragment,m),d=!1},d(m){Bt(c,m)}}}function $n(O){let c,d,m,b,S,w,C;return{c(){c=Pt("h1"),d=fe("formate"),b=Rt(),S=Pt("p"),w=fe("Make forms in a matter of minutes"),this.h()},l(_){c=Tt(_,"H1",{class:!0});var k=vt(c);d=he(k,"formate"),k.forEach(Q),b=Ut(_),S=Tt(_,"P",{class:!0});var P=vt(S);w=he(P,"Make forms in a matter of minutes"),P.forEach(Q),this.h()},h(){Z(c,"class","svelte-6vb4h2"),Z(S,"class","svelte-6vb4h2")},m(_,k){yt(_,c,k),ht(c,d),yt(_,b,k),yt(_,S,k),ht(S,w)},i(_){m||Pe(()=>{m=un(c,Te,{y:-8,duration:200}),m.start()}),C||Pe(()=>{C=un(S,Te,{y:-8,duration:200,delay:50}),C.start()})},o:ce,d(_){_&&Q(c),_&&Q(b),_&&Q(S)}}}function Yn(O){let c,d,m,b,S,w=O[1].length&&Nn(O);return m=new Zn({props:{position:"centered",fullWidth:!0,$$slots:{default:[Gr]},$$scope:{ctx:O}}}),m.$on("click",Lr),{c(){w&&w.c(),c=Rt(),d=Pt("div"),jt(m.$$.fragment)},l(C){w&&w.l(C),c=Ut(C),d=Tt(C,"DIV",{});var _=vt(d);Dt(m.$$.fragment,_),_.forEach(Q)},m(C,_){w&&w.m(C,_),yt(C,c,_),yt(C,d,_),Vt(m,d,null),S=!0},p(C,_){C[1].length?w?(w.p(C,_),_&2&&st(w,1)):(w=Nn(C),w.c(),st(w,1),w.m(c.parentNode,c)):w&&(Be(),gt(w,1,1,()=>{w=null}),Ve());const k={};_&1024&&(k.$$scope={dirty:_,ctx:C}),m.$set(k)},i(C){S||(st(w),st(m.$$.fragment,C),b||Pe(()=>{b=un(d,Te,{y:-8,duration:200,delay:150}),b.start()}),S=!0)},o(C){gt(w),gt(m.$$.fragment,C),S=!1},d(C){w&&w.d(C),C&&Q(c),C&&Q(d),Bt(m)}}}function Nn(O){let c,d=[],m=new Map,b,S,w=O[1];const C=_=>_[7].key;for(let _=0;_<w.length;_+=1){let k=Bn(O,w,_),P=C(k);m.set(P,d[_]=Hn(P,k))}return{c(){c=Pt("div");for(let _=0;_<d.length;_+=1)d[_].c();this.h()},l(_){c=Tt(_,"DIV",{class:!0});var k=vt(c);for(let P=0;P<d.length;P+=1)d[P].l(k);k.forEach(Q),this.h()},h(){Z(c,"class","list svelte-6vb4h2")},m(_,k){yt(_,c,k);for(let P=0;P<d.length;P+=1)d[P].m(c,null);S=!0},p(_,k){k&18&&(w=_[1],Be(),d=wr(d,k,C,1,_,w,m,c,Er,Hn,null,Bn),Ve())},i(_){if(!S){for(let k=0;k<w.length;k+=1)st(d[k]);Pe(()=>{b||(b=Xe(c,Te,{y:-8,duration:200,delay:100},!0)),b.run(1)}),S=!0}},o(_){for(let k=0;k<d.length;k+=1)gt(d[k]);b||(b=Xe(c,Te,{y:-8,duration:200,delay:100},!1)),b.run(0),S=!1},d(_){_&&Q(c);for(let k=0;k<d.length;k+=1)d[k].d();_&&b&&b.end()}}}function Hn(O,c){let d,m,b,S,w,C,_,k=c[7].name+"",P,V,U,u,z,dt,tt,W,at,D;z=new Fr({});function F(){return c[6](c[7])}return{key:O,first:null,c(){d=Pt("div"),m=Pt("a"),b=Pt("span"),S=fe("⏺"),C=Rt(),_=Pt("span"),P=fe(k),U=Rt(),u=Pt("button"),jt(z.$$.fragment),dt=Rt(),this.h()},l(G){d=Tt(G,"DIV",{class:!0});var et=vt(d);m=Tt(et,"A",{class:!0,href:!0});var pt=vt(m);b=Tt(pt,"SPAN",{class:!0});var St=vt(b);S=he(St,"⏺"),St.forEach(Q),C=Ut(pt),_=Tt(pt,"SPAN",{class:!0});var Nt=vt(_);P=he(Nt,k),Nt.forEach(Q),pt.forEach(Q),U=Ut(et),u=Tt(et,"BUTTON",{class:!0});var ot=vt(u);Dt(z.$$.fragment,ot),ot.forEach(Q),dt=Ut(et),et.forEach(Q),this.h()},h(){Z(b,"class",w=c[7].color+" indicator svelte-6vb4h2"),Z(_,"class","name svelte-6vb4h2"),Z(m,"class","info svelte-6vb4h2"),Z(m,"href",V="/editor/"+c[7].key),Z(u,"class","delete svelte-6vb4h2"),Z(d,"class","item svelte-6vb4h2"),this.first=d},m(G,et){yt(G,d,et),ht(d,m),ht(m,b),ht(b,S),ht(m,C),ht(m,_),ht(_,P),ht(d,U),ht(d,u),Vt(z,u,null),ht(d,dt),W=!0,at||(D=Pr(u,"click",F),at=!0)},p(G,et){c=G,(!W||et&2&&w!==(w=c[7].color+" indicator svelte-6vb4h2"))&&Z(b,"class",w),(!W||et&2)&&k!==(k=c[7].name+"")&&Tr(P,k),(!W||et&2&&V!==(V="/editor/"+c[7].key))&&Z(m,"href",V)},i(G){W||(st(z.$$.fragment,G),G&&Pe(()=>{tt||(tt=Xe(d,Dn,{duration:200},!0)),tt.run(1)}),W=!0)},o(G){gt(z.$$.fragment,G),G&&(tt||(tt=Xe(d,Dn,{duration:200},!1)),tt.run(0)),W=!1},d(G){G&&Q(d),Bt(z),G&&tt&&tt.end(),at=!1,D()}}}function Gr(O){let c,d,m;return d=new Yr({}),{c(){c=fe("Create form "),jt(d.$$.fragment)},l(b){c=he(b,"Create form "),Dt(d.$$.fragment,b)},m(b,S){yt(b,c,S),Vt(d,b,S),m=!0},i(b){m||(st(d.$$.fragment,b),m=!0)},o(b){gt(d.$$.fragment,b),m=!1},d(b){b&&Q(c),Bt(d,b)}}}function qr(O){let c,d,m,b,S,w,C,_,k,P=O[2]==="create_form"&&Xn();w=new Xr({props:{class:"logo",width:512,height:512,src:"./logo.riv",onStop:O[3]}});let V=O[0]&&$n(),U=O[0]&&Yn(O);return{c(){c=Rt(),P&&P.c(),d=Rt(),m=Pt("div"),b=Pt("div"),S=Pt("div"),jt(w.$$.fragment),C=Rt(),V&&V.c(),_=Rt(),U&&U.c(),this.h()},l(u){br("svelte-3f9glm",Vn.head).forEach(Q),c=Ut(u),P&&P.l(u),d=Ut(u),m=Tt(u,"DIV",{class:!0});var dt=vt(m);b=Tt(dt,"DIV",{class:!0});var tt=vt(b);S=Tt(tt,"DIV",{class:!0});var W=vt(S);Dt(w.$$.fragment,W),C=Ut(W),V&&V.l(W),W.forEach(Q),_=Ut(tt),U&&U.l(tt),tt.forEach(Q),dt.forEach(Q),this.h()},h(){Vn.title="Formate",Z(S,"class","hero svelte-6vb4h2"),Z(b,"class","content svelte-6vb4h2"),Z(m,"class","welcome orange svelte-6vb4h2")},m(u,z){yt(u,c,z),P&&P.m(u,z),yt(u,d,z),yt(u,m,z),ht(m,b),ht(b,S),Vt(w,S,null),ht(S,C),V&&V.m(S,null),ht(b,_),U&&U.m(b,null),k=!0},p(u,[z]){u[2]==="create_form"?P?z&4&&st(P,1):(P=Xn(),P.c(),st(P,1),P.m(d.parentNode,d)):P&&(Be(),gt(P,1,1,()=>{P=null}),Ve()),u[0]?V?z&1&&st(V,1):(V=$n(),V.c(),st(V,1),V.m(S,null)):V&&(V.d(1),V=null),u[0]?U?(U.p(u,z),z&1&&st(U,1)):(U=Yn(u),U.c(),st(U,1),U.m(b,null)):U&&(Be(),gt(U,1,1,()=>{U=null}),Ve())},i(u){k||(st(P),st(w.$$.fragment,u),st(V),st(U),k=!0)},o(u){gt(P),gt(w.$$.fragment,u),gt(U),k=!1},d(u){u&&Q(c),P&&P.d(u),u&&Q(d),u&&Q(m),Bt(w),V&&V.d(),U&&U.d()}}}function Kr(O,c,d){let m,b;De(O,Wr,P=>d(2,b=P));let{data:S}=c;zn(()=>{document.documentElement.className=""});let w=!1;const C=()=>d(0,w=!0);async function _(P){d(1,m=m.filter(V=>V.key!==P)),await jr(`/api/forms/${P}`)}const k=P=>_(P==null?void 0:P.key);return O.$$set=P=>{"data"in P&&d(5,S=P.data)},O.$$.update=()=>{O.$$.dirty&32&&d(1,m=S.forms)},[w,m,b,C,_,S,k]}class ni extends $e{constructor(c){super(),Ye(this,c,Kr,qr,Ne,{data:5})}}export{ni as default};
