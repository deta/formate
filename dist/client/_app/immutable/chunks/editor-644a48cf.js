import{S as G,i as Q,s as R,P as V,Q as S,m as g,h,n as o,b as P,J as _,B as H,a3 as B,F as fe,k as y,q as W,a as F,l as b,r as Y,c as N,a1 as O,_ as Z,u as X,G as he,H as pe,I as _e,f as ke,W as te,Z as z,t as ge,a4 as ie,E as ve}from"./index-1a8d1abb.js";import{w as I,j as ce,k as T}from"./singletons-ae832ef8.js";import{f as se,a as ne}from"./Label-59fdd747.js";function me(s){let e,t,n,a,i,r;return{c(){e=V("svg"),t=V("path"),n=V("path"),a=V("path"),i=V("path"),r=V("path"),this.h()},l(l){e=S(l,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var d=g(e);t=S(d,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),g(t).forEach(h),n=S(d,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),g(n).forEach(h),a=S(d,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),g(a).forEach(h),i=S(d,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),g(i).forEach(h),r=S(d,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),g(r).forEach(h),d.forEach(h),this.h()},h(){o(t,"d","M4 7H20"),o(t,"stroke","black"),o(t,"stroke-width","2"),o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(n,"d","M10 11V17"),o(n,"stroke","black"),o(n,"stroke-width","2"),o(n,"stroke-linecap","round"),o(n,"stroke-linejoin","round"),o(a,"d","M14 11V17"),o(a,"stroke","black"),o(a,"stroke-width","2"),o(a,"stroke-linecap","round"),o(a,"stroke-linejoin","round"),o(i,"d","M5 7L6 19C6 20.1046 6.89543 21 8 21H16C17.1046 21 18 20.1046 18 19L19 7"),o(i,"stroke","black"),o(i,"stroke-width","2"),o(i,"stroke-linecap","round"),o(i,"stroke-linejoin","round"),o(r,"d","M9 7V4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V7"),o(r,"stroke","black"),o(r,"stroke-width","2"),o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(e,"width","22"),o(e,"height","22"),o(e,"viewBox","0 0 24 24"),o(e,"fill","none"),o(e,"xmlns","http://www.w3.org/2000/svg")},m(l,d){P(l,e,d),_(e,t),_(e,n),_(e,a),_(e,i),_(e,r)},p:H,i:H,o:H,d(l){l&&h(e)}}}class Me extends G{constructor(e){super(),Q(this,e,null,me,R,{})}}const U=I(null),we=I(null);function Ee(){U.set(null),we.set(null)}function De(){U.set("create_form")}function He(){U.set("add_field")}function Pe(){U.set("settings")}async function ze(s,e){const t=await fetch(s,{method:"POST",body:e?JSON.stringify(e):void 0,headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.statusText);return await t.json()}async function ye(s,e){const t=await fetch(s,{method:"PUT",body:e?JSON.stringify(e):void 0,headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.statusText);return await t.json()}async function Fe(s,e){const t=await fetch(s,{method:"DELETE",body:e?JSON.stringify(e):void 0,headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(t.statusText);return await t.json()}let de=(s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function Ne(s){return s.toLowerCase().trim().split(/\s+/g).join("-")}function Oe(s,e){const t=I({...s}),n=I({}),a=ce(n,p=>Object.keys(p).length>0);return{values:t,errors:n,hasErrors:a,resetValues:()=>{t.set({...s})},resetErrors:()=>{n.set({})},resetKeyError:p=>{n.update(u=>{const w={...u};return delete w[p],w})},validate:()=>{n.set({});const p=B(t);for(const u in p)if(typeof e[u]=="function")try{e[u](p[u])}catch(w){n.update(E=>({...E,[u]:w.message}))}}}}function re(s,e,t){const n=s.slice();return n[7]=e[t],n}function ae(s){let e,t=s[7]+"",n,a,i;return{c(){e=y("button"),n=W(t),this.h()},l(r){e=b(r,"BUTTON",{class:!0});var l=g(e);n=Y(l,t),l.forEach(h),this.h()},h(){o(e,"class","tab svelte-zp8cfi"),O(e,"active",s[0]===s[7])},m(r,l){P(r,e,l),_(e,n),a||(i=Z(e,"click",function(){ve(s[4](s[7]))&&s[4](s[7]).apply(this,arguments)}),a=!0)},p(r,l){s=r,l&8&&t!==(t=s[7]+"")&&X(n,t),l&9&&O(e,"active",s[0]===s[7])},d(r){r&&h(e),a=!1,i()}}}function be(s){let e,t,n,a,i,r,l,d,p,u,w,E,j,A,x,C=s[3],k=[];for(let c=0;c<C.length;c+=1)k[c]=ae(re(s,C,c));const J=s[6].default,v=fe(J,s,s[5],null);return{c(){e=y("div"),t=y("div"),n=y("h2"),a=W(s[1]),i=F(),r=y("div");for(let c=0;c<k.length;c+=1)k[c].c();l=F(),d=y("div"),v&&v.c(),u=F(),w=y("div"),this.h()},l(c){e=b(c,"DIV",{class:!0});var m=g(e);t=b(m,"DIV",{class:!0});var f=g(t);n=b(f,"H2",{class:!0});var D=g(n);a=Y(D,s[1]),D.forEach(h),i=N(f),r=b(f,"DIV",{class:!0});var $=g(r);for(let K=0;K<k.length;K+=1)k[K].l($);$.forEach(h),l=N(f),d=b(f,"DIV",{class:!0});var ee=g(d);v&&v.l(ee),ee.forEach(h),f.forEach(h),u=N(m),w=b(m,"DIV",{class:!0}),g(w).forEach(h),m.forEach(h),this.h()},h(){o(n,"class","svelte-zp8cfi"),o(r,"class","tabs svelte-zp8cfi"),o(d,"class","content svelte-zp8cfi"),O(d,"paddings",s[2]),o(t,"class","modal svelte-zp8cfi"),o(w,"class","overlay svelte-zp8cfi"),o(e,"class","wrapper svelte-zp8cfi")},m(c,m){P(c,e,m),_(e,t),_(t,n),_(n,a),_(t,i),_(t,r);for(let f=0;f<k.length;f+=1)k[f].m(r,null);_(t,l),_(t,d),v&&v.m(d,null),_(e,u),_(e,w),j=!0,A||(x=Z(w,"click",Ee),A=!0)},p(c,[m]){if((!j||m&2)&&X(a,c[1]),m&25){C=c[3];let f;for(f=0;f<C.length;f+=1){const D=re(c,C,f);k[f]?k[f].p(D,m):(k[f]=ae(D),k[f].c(),k[f].m(r,null))}for(;f<k.length;f+=1)k[f].d(1);k.length=C.length}v&&v.p&&(!j||m&32)&&he(v,J,c,c[5],j?_e(J,c[5],m,null):pe(c[5]),null),(!j||m&4)&&O(d,"paddings",c[2])},i(c){j||(ke(v,c),te(()=>{p||(p=z(t,se,{y:32,opacity:1,duration:200},!0)),p.run(1)}),te(()=>{E||(E=z(e,ne,{duration:200},!0)),E.run(1)}),j=!0)},o(c){ge(v,c),p||(p=z(t,se,{y:32,opacity:1,duration:200},!1)),p.run(0),E||(E=z(e,ne,{duration:200},!1)),E.run(0),j=!1},d(c){c&&h(e),ie(k,c),v&&v.d(c),c&&p&&p.end(),c&&E&&E.end(),A=!1,x()}}}function je(s,e,t){let{$$slots:n={},$$scope:a}=e,{title:i}=e,{paddings:r=!0}=e,{tabs:l=[]}=e,{currentTab:d=(l==null?void 0:l[0])||""}=e;const p=u=>()=>t(0,d=u);return s.$$set=u=>{"title"in u&&t(1,i=u.title),"paddings"in u&&t(2,r=u.paddings),"tabs"in u&&t(3,l=u.tabs),"currentTab"in u&&t(0,d=u.currentTab),"$$scope"in u&&t(5,a=u.$$scope)},[d,i,r,l,p,a,n]}class Le extends G{constructor(e){super(),Q(this,e,je,be,R,{title:1,paddings:2,tabs:3,currentTab:0})}}function oe(s,e,t){const n=s.slice();return n[3]=e[t],n}function le(s){let e,t=s[0]===s[3]?"✓":"",n,a,i,r;return{c(){e=y("div"),n=W(t),a=F(),this.h()},l(l){e=b(l,"DIV",{class:!0});var d=g(e);n=Y(d,t),a=N(d),d.forEach(h),this.h()},h(){o(e,"class",s[3]+" color svelte-1jjidvf")},m(l,d){P(l,e,d),_(e,n),_(e,a),i||(r=Z(e,"click",s[2](s[3])),i=!0)},p(l,d){s=l,d&1&&t!==(t=s[0]===s[3]?"✓":"")&&X(n,t)},d(l){l&&h(e),i=!1,r()}}}function Te(s){let e,t=s[1],n=[];for(let a=0;a<t.length;a+=1)n[a]=le(oe(s,t,a));return{c(){e=y("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var i=g(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(h),this.h()},h(){o(e,"class","colors svelte-1jjidvf")},m(a,i){P(a,e,i);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(a,[i]){if(i&7){t=a[1];let r;for(r=0;r<t.length;r+=1){const l=oe(a,t,r);n[r]?n[r].p(l,i):(n[r]=le(l),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i:H,o:H,d(a){a&&h(e),ie(n,a)}}}function Ce(s,e,t){let{value:n="orange"}=e;const a=["red","orange","green","blue","purple"],i=r=>()=>{t(0,n=r)};return s.$$set=r=>{"value"in r&&t(0,n=r.value)},s.$$.update=()=>{s.$$.dirty&1&&(document.documentElement.className="",document.documentElement.classList.add(n))},[n,a,i]}class Be extends G{constructor(e){super(),Q(this,e,Ce,Te,R,{value:0})}}T.disable_scroll_handling;const Ue=T.goto;T.invalidate;const Ae=T.invalidateAll;T.preload_data;T.preload_code;T.before_navigate;T.after_navigate;const M=I(),L=I(),ue=ce([L,M],([s,e])=>{var n;const t=(n=e==null?void 0:e.screens)==null?void 0:n.findIndex(a=>a.key===s);return t===-1?0:t});let q;M.subscribe(s=>{if(!(s!=null&&s.key))return;q&&clearInterval(q);const e=s.key,t=structuredClone(s);q=setTimeout(()=>{ye(`/api/forms/${e}`,t)},500)});function Je(){const s=de();M.update(e=>(e.screens.push({key:s,title:`New screen #${e.screens.length}`,description:"You can put screen description here.",fields:[]}),L.set(s),e))}function Ke(s){M.update(e=>{var t,n;return e.screens=e.screens.filter(a=>a.key!==s),B(L)===s&&L.set((n=(t=e.screens)==null?void 0:t.at(-1))==null?void 0:n.key),e})}function qe(s){M.update(e=>{const t=B(ue),n=e.screens[t].fields.length;return e.screens[t].fields.push({key:de(),type:s,required:!1,defaultValue:"",placeholder:"",fieldKey:"sdf",title:`New input field #${n}`}),e})}function Ge(s){M.update(e=>{const t=B(ue);return e.screens[t].fields=e.screens[t].fields.filter(n=>n.key!==s),e})}export{Be as C,Fe as D,Oe as H,Le as M,ze as P,Me as T,U as a,Pe as b,Ne as c,Ge as d,Je as e,M as f,Ue as g,Ee as h,Ae as i,L as j,He as k,Ke as l,qe as m,de as n,De as o,ue as s};
